yK6isga1yRSEkte6,"{""name"":""instagram lead generation latest"",""active"":false,""nodes"":[{""parameters"":{""httpMethod"":""POST"",""path"":""/get-instagram-leads"",""options"":{}},""type"":""n8n-nodes-base.webhook"",""typeVersion"":2.1,""position"":[-4768,-64],""id"":""22ecf57a-3584-41a3-9b2c-d11e80cfc990"",""name"":""Webhook"",""webhookId"":""243ad08d-e564-446a-b7ab-4e7c2dbca1da""},{""parameters"":{""jsCode"":""// --- STEP 1: Get output text safely ---\nlet raw;\n\n// Check if this is initial run or loop-back\nif ($input.first().json.output) {\n  // Initial run from AI Agent\n  raw = $input.first().json.output;\n} else if ($json.output) {\n  raw = $json.output;\n} else {\n  // This is a loop-back, skip processing\n  const staticData = $getWorkflowStaticData('global');\n  return {\n    json: {\n      count: staticData.targetCount,\n      generated: staticData.generated,\n      niche: staticData.niche,\n      location: staticData.location,\n      searchQuery: `${staticData.niche} ${staticData.location}`,\n    }\n  };\n}\n\n// --- STEP 2: Clean markdown wrappers ---\nraw = raw.replace(/```json|```/g, \""\"").trim();\n\n// --- STEP 3: Parse JSON safely ---\nlet data;\ntry {\n  data = JSON.parse(raw);\n} catch (error) {\n  console.log(\""‚ùå Failed to parse Gemini JSON:\"", raw);\n  throw new Error(\""Gemini output is not valid JSON.\"");\n}\n\n// --- STEP 4: Static data management ---\nconst staticData = $getWorkflowStaticData('global');\n\nif (!staticData.currentBatch) {\n  staticData.generated = 0;\n  staticData.targetCount = data.count;\n  staticData.niche = data.niche;\n  staticData.location = data.location;\n  staticData.currentBatch = 1;\n}\n\nconsole.log(`üìä Batch ${staticData.currentBatch}: ${staticData.generated}/${staticData.targetCount} leads`);\n\n// --- STEP 5: Return normalized data ---\nreturn {\n  json: {\n    count: staticData.targetCount,\n    generated: staticData.generated,\n    niche: data.niche,\n    location: data.location,\n    searchQuery: `${data.niche} ${data.location}`,\n  }\n};""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-3952,-64],""id"":""d2ba660b-7dc7-444f-b524-ec1b91bf8991"",""name"":""Code in JavaScript""},{""parameters"":{""promptType"":""define"",""text"":""=Extract structured information from this query:\\nQuery: {{$json['query']}}\\nReturn in JSON with keys: count, niche, location.\n\nand just give the ouput in json format of the information extracted and nothing else no explanation just the information in json format\n"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.agent"",""typeVersion"":2.2,""position"":[-4560,-64],""id"":""5e289359-462b-4b82-92bc-459bd29a78ee"",""name"":""AI Agent""},{""parameters"":{""options"":{}},""type"":""@n8n/n8n-nodes-langchain.lmChatGoogleGemini"",""typeVersion"":1,""position"":[-4560,128],""id"":""2755ec05-7dc0-4f7b-9802-d9145ed0a3eb"",""name"":""Google Gemini Chat Model"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""promptType"":""define"",""text"":""=Generate {{ Math.min($json.count * 2, 8) }} HIGHLY SPECIFIC hashtags for businesses in this niche.\nNiche: {{ $json.niche }}\nLocation: {{ $json.location }}\n\nFocus on:\n- Business/professional hashtags (not consumer/lifestyle)\n- Location-specific tags\n- Industry-specific terms\nand the tags should be without # and no explanation (Strictly) just the output\nReturn JSON: {\""hashtags\"": [\""tag1\"", \""tag2\"", ...]}"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.agent"",""typeVersion"":2.2,""position"":[-3712,-64],""id"":""6af17ebd-5b1c-4acc-8ac5-2f0ae422e263"",""name"":""AI Agent1""},{""parameters"":{""modelName"":""models/gemini-flash-lite-latest"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.lmChatGoogleGemini"",""typeVersion"":1,""position"":[-3744,128],""id"":""3b414d7d-c8e3-453f-8036-8796f7500797"",""name"":""Google Gemini Chat Model1"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""jsCode"":""let raw = $json.output.replace(/```json|```/g, \""\"").trim();\nlet data = JSON.parse(raw);\n\nconst staticData = $getWorkflowStaticData('global');\nconst target = staticData.targetCount || 10;\nconst generated = staticData.generated || 0;\nconst remaining = target - generated;\n\nconsole.log(`üéØ Current: ${generated}/${target}, Need ${remaining} more`);\n\n// If already at target, return empty to stop\nif (remaining <= 0) {\n  console.log('‚úÖ Target already reached');\n  return [];\n}\n\n// Smart batch size\nconst batchMultiplier = staticData.rejectionRate > 0.7 ? 5 : 3;\nconst batchSize = Math.min(remaining * batchMultiplier, 15);\n\nconsole.log(`üì• Scraping ${batchSize} profiles (multiplier: ${batchMultiplier}x)`);\n\nreturn [{\n  json: {\n    hashtags: data.hashtags.slice(0, 2),\n    resultsLimit: batchSize,\n    proxyConfiguration: { useApifyProxy: true }\n  }\n}];""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-3264,-64],""id"":""180feec3-1ea4-49c9-8f90-69b4843e2740"",""name"":""Code in JavaScript2""},{""parameters"":{""operation"":""Run actor and get dataset"",""actorSource"":""store"",""actorId"":{""__rl"":true,""mode"":""url"",""value"":""https://console.apify.com/actors/reGe1ST3OBgYZSsZJ/input""},""customBody"":""={{ $json }}""},""type"":""@apify/n8n-nodes-apify.apify"",""typeVersion"":1,""position"":[-3024,-64],""id"":""64b11142-7c8f-441a-bf66-85fba410c5bf"",""name"":""Run an Actor and get dataset"",""credentials"":{""apifyApi"":{""id"":""8kAOvstVFuKbpJlO"",""name"":""Apify account""}}},{""parameters"":{""jsCode"":""const seen = new Set();\nconst usernames = [];\n\nfor (const item of items) {\n  const username =\n    item.json.username ||\n    item.json.ownerUsername ||\n    item.json.owner?.username;\n\n  if (username && !seen.has(username)) {\n    seen.add(username);\n    usernames.push(username);\n  }\n}\n\nreturn [\n  {\n    json: {\n      usernames,\n      resultsLimit: $('Code in JavaScript').first().json.count,\n      proxyConfiguration: {\n        useApifyProxy: true\n      }\n    }\n  }\n];\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-2784,-64],""id"":""6bce58d5-3afe-432a-9054-4bba00fa351f"",""name"":""Code in JavaScript3""},{""parameters"":{""operation"":""Run actor and get dataset"",""actorSource"":""store"",""actorId"":{""__rl"":true,""value"":""https://console.apify.com/actors/dSCLg0C3YEZ83HzYX/input"",""mode"":""url""},""customBody"":""={{ $json }}""},""type"":""@apify/n8n-nodes-apify.apify"",""typeVersion"":1,""position"":[-2560,-64],""id"":""97ea7cdf-1812-434b-80b9-2d9762fbf222"",""name"":""Run an Actor and get dataset1"",""credentials"":{""apifyApi"":{""id"":""8kAOvstVFuKbpJlO"",""name"":""Apify account""}}},{""parameters"":{""jsCode"":""return items.map(item => {\n  const data = item.json || {};\n  const bio = data.biography || \""\"";\n\n  const emails = bio.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g) || [];\n  const phones = bio.match(/\\+?\\d[\\d\\s-]{7,}/g) || [];\n\n  return {\n    json: {\n      username: data.username || \""\"",\n      fullName: data.fullName || \""\"",\n      instagramUrl: data.url || \""\"",\n      profilePicUrl: data.profilePicUrl || \""\"",\n      isVerified: data.isVerified || false,\n      isBusiness: data.isBusinessAccount || false,\n      category: data.businessCategoryName || \""\"",\n      accountType: data.accountType || \""personal\"",\n      privateAccount: data.isPrivate || false,\n      emails,\n      phones,\n      website: data.externalUrl || \""\"",\n      whatsappNumber: data.whatsappNumber || \""\"",\n      address: data.address || \""\"",\n      followersCount: data.followersCount || 0,\n      followingCount: data.followingCount || 0,\n      postsCount: data.postsCount || 0,\n      engagementRate: data.engagementRate || null,\n      avgLikes: data.avgLikes || null,\n      avgComments: data.avgComments || null,\n      bio,\n      keywordsInBio: bio\n        .split(/\\s+/)\n        .filter(w => w.startsWith(\""#\"") || /^[A-Za-z]+$/.test(w))\n        .slice(0, 10),\n      recentPost: {\n        caption: data.latestPosts?.[0]?.caption || \""\"",\n        hashtags: data.latestPosts?.[0]?.hashtags || [],\n        imageUrl: data.latestPosts?.[0]?.imageUrl || \""\"",\n        postUrl: data.latestPosts?.[0]?.url || \""\"",\n        location: data.latestPosts?.[0]?.locationName || \""\"",\n        timestamp: data.latestPosts?.[0]?.timestamp || \""\"",\n      },\n      country: data.countryCode || \""Unknown\"",\n      city: data.cityName || \""\"",\n      location: data.location || \""\"",\n      timezone: data.timezone || \""\"",\n      sourceType: data.sourceType || \""hashtag_search\"",\n      sourceHashtag: data.hashtag || \""\"",\n      sourceActor: \""Instagram-Hashtag-Scraper\"",\n      dateCollected: new Date().toISOString(),\n      userasked: $('Edit Fields').first().json.output,\n      query: $('Edit Fields').first().json.query,\n      // üî• ADD THESE LINES:\n      count: $('Code in JavaScript').first().json.count,\n      generated: $('Code in JavaScript').first().json.generated\n    }\n  };\n});""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-2320,-64],""id"":""ec37bfbc-a935-43db-ab5a-3201ab5ace6c"",""name"":""Code in JavaScript5""},{""parameters"":{""options"":{""reset"":false}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[-1744,-64],""id"":""dd1d34d6-39ac-4429-8dec-1b27e49e2508"",""name"":""Loop Over Items""},{""parameters"":{""promptType"":""define"",""text"":""=You are an intelligent, context-aware lead verification assistant.\\n\\nYou will be given structured JSON data from a social media profile (mainly Instagram), along with the user's specific lead generation query.\\n\\nINPUT\\n\\n{{$json}}\\n\\nUSER REQUEST / QUERY\\n\\n{{ $json.userasked }}\\n\\nTASK\\n\\nDetermine whether this Instagram profile is a valid business lead for the user's query.\\n\\nGenerate three fields for outreach:\\n\\nDM: A short Instagram direct message, personalized using the profile‚Äôs fullName, category, and location.\\n\\nemail_subject: A compelling subject line for an email.\\n\\nemail_body: A complete, professional email body, personalized with fullName, category, and location.\\n\\nNever leave placeholders like [Your Name] or [Your Company].\\n\\nUse realistic generic sender names and company names if needed.\\n\\nIf the profile is not a valid lead, still return \\\""false\\\"" but provide polite default DM and email messages.\\n\\nDECISION RULES\\n\\n‚úÖ Return \\\""true\\\"" if:\\n\\nThe profile represents a business, brand, company, or professional offering services directly relevant to the query/niche.\\n\\nBio, category, website, or posts show commercial activity in the requested niche/location.\\n\\n‚ùå Return \\\""false\\\"" if:\\n\\nThe profile is a non-business individual, influencer, student, or unrelated.\\n\\nNo relevant products or services are provided.\\n\\nOUTPUT FORMAT (STRICT JSON ONLY)\\n{\\n  \\\""output\\\"": \\\""true\\\"",\\n  \\\""DM\\\"": \\\""Hi [fullName], I came across your profile and was impressed by your work in [category] in [location]. I‚Äôd love to connect and explore potential collaboration opportunities.\\\"",\\n  \\\""email_subject\\\"": \\\""Collaboration Opportunity with [fullName]\\\"",\\n  \\\""email_body\\\"": \\\""Hi [fullName],\\\\n\\\\nI recently came across your company, [fullName], which specializes in [category] in [location]. We frequently collaborate with businesses like yours on projects and believe there could be great synergy between our teams. Would you be open to a brief call to discuss potential collaboration?\\\\n\\\\nBest regards,\\\\nAlex Thompson\\\\nBrightBuild Solutions\\\\ncontact@brightbuild.com\\\""\\n}\\n\\n\\nImportant: Replace [fullName], [category], [location] dynamically with the values from the profile JSON.\\nDo not leave any placeholders. Each DM/email should be unique for the lead."",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.agent"",""typeVersion"":2.2,""position"":[-1232,-64],""id"":""8769a619-2d88-4dec-9ddd-6bcf9dfd2392"",""name"":""AI Agent3""},{""parameters"":{""modelName"":""models/gemini-2.5-flash-lite"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.lmChatGoogleGemini"",""typeVersion"":1,""position"":[-1232,208],""id"":""f1b41f7f-38df-4585-946f-7ee6b93e6139"",""name"":""Google Gemini Chat Model2"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""700536c5-1444-4556-810a-2593576181e4"",""leftValue"":""={{ $json.result }}"",""rightValue"":""true"",""operator"":{""type"":""string"",""operation"":""equals""}}],""combinator"":""and""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-640,-64],""id"":""e9ef02b8-5f3f-41b4-ac7f-18262fc090a9"",""name"":""If""},{""parameters"":{""assignments"":{""assignments"":[{""id"":""f103bc90-6120-490d-8945-9072088da28e"",""name"":""output"",""value"":""={{ $json.output }}"",""type"":""string""},{""id"":""99094294-8db8-41ed-a2da-fa546c5d8ab1"",""name"":""query"",""value"":""={{ $('Webhook').item.json.query }}"",""type"":""string""}]},""options"":{}},""type"":""n8n-nodes-base.set"",""typeVersion"":3.4,""position"":[-4224,-64],""id"":""04eda746-432a-4c08-ba33-b63dd40b6581"",""name"":""Edit Fields""},{""parameters"":{""operation"":""upsert"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblLANe6ffdqYpat4"",""mode"":""list"",""cachedResultName"":""Instagram Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblLANe6ffdqYpat4""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""="",""Profile Photo"":""={{ $('Loop Over Items').item.json.profilePicUrl }}"",""Full Name"":""={{ $('Loop Over Items').item.json.fullName }}"",""Bio"":""={{ $('Loop Over Items').item.json.bio }}"",""Email"":""={{ $('Loop Over Items').item.json.emails?.[0] || '' }}"",""Phone Number"":""={{ $('Loop Over Items').item.json.phones?.[0] || '' }}"",""Post Count"":""={{ $json.postsCount }}"",""Following"":""={{ $json.followingCount }}"",""Followers"":""={{ $json.followersCount }}"",""Username"":""={{ $('Loop Over Items').item.json.username }}"",""ProfileURL"":""={{ $json.instagramUrl }}"",""location"":""={{ $json.location }}{{ $json.city }}{{ $json.country }}"",""DM Status"":""DM Ready"",""Proposed DM"":""={{ $('Code in JavaScript7').item.json.DM }}"",""Proposed Email (subject)"":""={{ $('Code in JavaScript7').item.json.email_subject }}"",""Proposed Email (body)"":""={{ $('Code in JavaScript7').item.json.email_body }}""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true},{""id"":""Username"",""displayName"":""Username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Profile Photo"",""displayName"":""Profile Photo"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""ProfileURL"",""displayName"":""ProfileURL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Full Name"",""displayName"":""Full Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Bio"",""displayName"":""Bio"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Followers"",""displayName"":""Followers"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""number"",""readOnly"":false,""removed"":false},{""id"":""Following"",""displayName"":""Following"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""number"",""readOnly"":false,""removed"":false},{""id"":""Post Count"",""displayName"":""Post Count"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""number"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Phone Number"",""displayName"":""Phone Number"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""location"",""displayName"":""location"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""DM Status"",""displayName"":""DM Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""DM Ready"",""value"":""DM Ready""},{""name"":""DM Sent"",""value"":""DM Sent""}],""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed Email (subject)"",""displayName"":""Proposed Email (subject)"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed Email (body)"",""displayName"":""Proposed Email (body)"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for Email"",""displayName"":""Change for Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Query Status (from Instagram Queries)"",""displayName"":""Query Status (from Instagram Queries)"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-144,-80],""id"":""6fc5acff-3bc4-4dd0-b2f5-e904fa303d9d"",""name"":""Create or update a record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""jsCode"":""// Remove markdown and parse JSON blocks safely\nlet raw = $json.output.replace(/```json|```/g, \""\"").trim();\n\n// Some AI outputs may contain multiple JSON blocks; take the last valid block\nlet blocks = raw.split(/}\\s*{/).map((b, i, arr) => {\n  if (i > 0) b = '{' + b;\n  if (i < arr.length - 1) b = b + '}';\n  return b;\n});\n\nlet parsed;\nfor (let block of blocks.reverse()) {\n  try {\n    parsed = JSON.parse(block);\n    break;\n  } catch (e) {\n    continue; // try next block\n  }\n}\n\n// Default safe values if parsing fails\nparsed = parsed || {};\nlet result = parsed.output?.trim().toLowerCase() === \""true\"" ? \""true\"" : \""false\"";\nlet dmText = parsed.DM?.trim() || \""Hi there, I came across your profile. Wishing you continued success!\"";\nlet emailSubject = parsed.email_subject?.trim() || \""Hello from BrightBuild Solutions\"";\nlet emailBody = parsed.email_body?.trim() || \""Hi, I just wanted to reach out and wish you continued success with your work.\"";\n\n// Track rejections\nconst staticData = $getWorkflowStaticData('global');\nstaticData.totalProcessed = (staticData.totalProcessed || 0) + 1;\nif (result === \""false\"") {\n  staticData.totalRejected = (staticData.totalRejected || 0) + 1;\n}\nstaticData.rejectionRate = staticData.totalRejected / staticData.totalProcessed;\n\nconsole.log(`üìä Rejection rate: ${(staticData.rejectionRate * 100).toFixed(1)}%`);\n\n// Return result with DM and split Email fields\nreturn [{\n  json: {\n    result,\n    DM: dmText,\n    email_subject: emailSubject,\n    email_body: emailBody\n  }\n}];""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-880,-64],""id"":""4d00a2b6-dc9f-4e9e-a285-488026bc4a3b"",""name"":""Code in JavaScript7""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""fba6b6db-bc7b-4b5c-9286-11f4c0cd8ce0"",""leftValue"":""={{ $json.needMore }}"",""rightValue"":""=true"",""operator"":{""type"":""boolean"",""operation"":""true"",""singleValue"":true}}],""combinator"":""and""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-944,-288],""id"":""c1f2a64c-4aa0-4cb1-ad01-0c0c71b132fe"",""name"":""If1""},{""parameters"":{""jsCode"":""const staticData = $getWorkflowStaticData('global');\nstaticData.generated = (staticData.generated || 0) + 1;\n\nconst loopItem = $('Loop Over Items').item.json;\nconsole.log(`‚úÖ Lead #${staticData.generated} saved`);\n\nreturn [{\n  json: {\n    ...loopItem,\n    generated: staticData.generated\n  }\n}];""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-384,-80],""id"":""9e23722e-4258-4ced-bf5f-eb4dc89cfbfe"",""name"":""Code in JavaScript4""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""5fab40c3-58d2-4cc4-865e-292e807c61b5"",""leftValue"":""={{ $('Code in JavaScript').first().json.generated }}"",""rightValue"":""={{ $('Code in JavaScript').first().json.count }}"",""operator"":{""type"":""number"",""operation"":""lt""}}],""combinator"":""and""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-1472,-48],""id"":""9d66c130-09e5-495a-a448-e0a8fa2ded1c"",""name"":""If2""},{""parameters"":{""jsCode"":""const staticData = $getWorkflowStaticData('global');\nconst target = staticData.targetCount || 0;\nconst generated = staticData.generated || 0;\nconst needed = target - generated;\n\nif (needed <= 0) {\n  console.log('‚úÖ Target reached, stopping');\n  return [];\n}\n\nconsole.log(`üîç Processing ${Math.min(items.length, needed)} profiles`);\nreturn items.slice(0, needed);""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-2048,-64],""id"":""86b89811-76f8-4862-9b68-b0c9347fb8e1"",""name"":""Code in JavaScript1""},{""parameters"":{""jsCode"":""const staticData = $getWorkflowStaticData('global');\nconst generated = staticData.generated || 0;\nconst target = staticData.targetCount || 0;\nconst stillNeeded = target - generated;\n\nconsole.log(`üèÅ Batch done: ${generated}/${target} (rejection rate: ${((staticData.rejectionRate || 0) * 100).toFixed(1)}%)`);\n\nif (stillNeeded > 0) {\n  staticData.currentBatch = (staticData.currentBatch || 1) + 1;\n} else {\n  console.log(`‚úÖ Complete in ${staticData.currentBatch} batches!`);\n  // DON'T clear niche/location - needed for loop-back\n  delete staticData.generated;\n  delete staticData.targetCount;\n  delete staticData.currentBatch;\n  delete staticData.totalProcessed;\n  delete staticData.totalRejected;\n  delete staticData.rejectionRate;\n  // Keep staticData.niche and staticData.location\n}\n\nreturn [{json: { generated, target, needMore: stillNeeded > 0 }}];""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-1216,-288],""id"":""771f6c10-4941-45fb-9952-402db4571b3c"",""name"":""Code in JavaScript6""},{""parameters"":{""jsCode"":""if ($('Code in JavaScript').first().json.generated === $('Code in JavaScript').first().json.count) {\n  console.log('üéØ Target reached exactly!');\n} else {\n  console.log(`‚ö†Ô∏è Only ${$('Code in JavaScript').first().json.generated} of ${$('Code in JavaScript').first().json.count} added`);\n}\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-448,-288],""id"":""c67aa47f-5569-4023-8fc2-395089348894"",""name"":""Code in JavaScript8""},{""parameters"":{},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[96,-80],""id"":""6b90a01b-5a0e-4a9f-9ee5-d9bb3461f559"",""name"":""Wait"",""webhookId"":""6b486eb2-186e-4a16-b713-7611465fb4d6""},{""parameters"":{},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[-640,-304],""id"":""32df00ce-8b17-4dbd-a20c-9a85b1de4dc5"",""name"":""Wait1"",""webhookId"":""549b84ea-17e6-445b-9785-74587939f6c1""}],""connections"":{""Webhook"":{""main"":[[{""node"":""AI Agent"",""type"":""main"",""index"":0}]]},""Google Gemini Chat Model"":{""ai_languageModel"":[[{""node"":""AI Agent"",""type"":""ai_languageModel"",""index"":0}]]},""AI Agent"":{""main"":[[{""node"":""Edit Fields"",""type"":""main"",""index"":0}]]},""Code in JavaScript"":{""main"":[[{""node"":""AI Agent1"",""type"":""main"",""index"":0}]]},""Google Gemini Chat Model1"":{""ai_languageModel"":[[{""node"":""AI Agent1"",""type"":""ai_languageModel"",""index"":0}]]},""AI Agent1"":{""main"":[[{""node"":""Code in JavaScript2"",""type"":""main"",""index"":0}]]},""Code in JavaScript2"":{""main"":[[{""node"":""Run an Actor and get dataset"",""type"":""main"",""index"":0}]]},""Run an Actor and get dataset"":{""main"":[[{""node"":""Code in JavaScript3"",""type"":""main"",""index"":0}]]},""Code in JavaScript3"":{""main"":[[{""node"":""Run an Actor and get dataset1"",""type"":""main"",""index"":0}]]},""Run an Actor and get dataset1"":{""main"":[[{""node"":""Code in JavaScript5"",""type"":""main"",""index"":0}]]},""Code in JavaScript5"":{""main"":[[{""node"":""Code in JavaScript1"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[{""node"":""Code in JavaScript6"",""type"":""main"",""index"":0}],[{""node"":""If2"",""type"":""main"",""index"":0}]]},""AI Agent3"":{""main"":[[{""node"":""Code in JavaScript7"",""type"":""main"",""index"":0}]]},""Google Gemini Chat Model2"":{""ai_languageModel"":[[{""node"":""AI Agent3"",""type"":""ai_languageModel"",""index"":0}]]},""If"":{""main"":[[{""node"":""Code in JavaScript4"",""type"":""main"",""index"":0}],[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Edit Fields"":{""main"":[[{""node"":""Code in JavaScript"",""type"":""main"",""index"":0}]]},""Create or update a record"":{""main"":[[{""node"":""Wait"",""type"":""main"",""index"":0}]]},""Code in JavaScript7"":{""main"":[[{""node"":""If"",""type"":""main"",""index"":0}]]},""If1"":{""main"":[[{""node"":""Wait1"",""type"":""main"",""index"":0}]]},""Code in JavaScript4"":{""main"":[[{""node"":""Create or update a record"",""type"":""main"",""index"":0}]]},""If2"":{""main"":[[{""node"":""AI Agent3"",""type"":""main"",""index"":0}]]},""Code in JavaScript1"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Code in JavaScript6"":{""main"":[[{""node"":""If1"",""type"":""main"",""index"":0}]]},""Wait"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Wait1"":{""main"":[[{""node"":""Code in JavaScript"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-03T05:09:12.961+00:00"",""updatedAt"":""2025-11-11T05:56:35.769+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":null,""pinData"":{""Webhook"":[{""json"":{""query"":""get 9 leads on builders from abu dhabi""}}]},""versionId"":""3a243b50-7860-433b-b73a-c51f5e1d5643"",""triggerCount"":0,""id"":""yK6isga1yRSEkte6"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""Wkk6wkRXWrp5XRrO"",""isArchived"":false,""versionCounter"":3}"
cZyvxh41CwXiTuTD,"{""name"":""4. DM automations"",""active"":true,""nodes"":[{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""filterByFormula"":""{Status} = 'accepted'"",""returnAll"":false,""limit"":20,""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-2624,-16],""id"":""d09d4299-dc6b-4a04-ac5b-a293d5597291"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""jsCode"":""// --- Configuration ---\n// 1. Set the name of the field from your input node that holds the URL.\nconst urlInputFieldName = \""Profile Link\"";\n\n// 2. Set the name for the new field that will hold the username.\nconst usernameOutputFieldName = \""linkedInUsername\"";\n// --- End of Configuration ---\n\n\n// This loop processes each item that n8n passes to the Code node.\nfor (const item of items) {\n  const rawUrl =$input.first().json[\""LinkedIn URL\""] ;\n  let username = null; // Default to null\n  //\n  // Check if the URL field actually exists and is a string\n  if (rawUrl && typeof rawUrl === 'string') {\n\n    // Regex to match the username part of the URL\n    // It looks for text between 'linkedin.com/in/' and the next '/', '?', or '#'.\n    const match = rawUrl.match(/linkedin\\.com\\/in\\/([^/?#]+)/i);\n    \n    // If a match was found, use the captured part (the username).\n    // decodeURIComponent handles special characters in URLs (e.g., %20 for a space).\n    if (match && match[1]) {\n      username = decodeURIComponent(match[1]);\n    }\n  }\n\n  // Add the new 'linkedInUsername' field to the item's JSON data.\n  // If no username was found, this will add 'null'.\n  item.json[usernameOutputFieldName] = username;\n}\n\n// Return all the modified items to the next node in your workflow.\nreturn items;""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-2192,0],""id"":""29deb47a-88ce-4624-9e8c-f7e913e0ab55"",""name"":""Code1""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Status"":""DM sent"",""id"":""={{ $('Search records').item.json.id }}""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM , Mail Ready"",""value"":""DM , Mail Ready""},{""name"":""DM sent"",""value"":""DM sent""}],""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail "",""displayName"":""proposed Mail "",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-832,-176],""id"":""519b9be9-f5a0-4e7b-8135-cd81a6c66be7"",""name"":""Update record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[-2416,-16],""id"":""de3a5797-baa3-4432-940f-e2ae054ae146"",""name"":""Loop Over Items1""},{""parameters"":{""url"":""=https://api24.unipile.com:15433/api/v1/users/{{ $json.linkedInUsername }}"",""sendQuery"":true,""queryParameters"":{""parameters"":[{""name"":""account_id"",""value"":""HNsTHYn7SCStd6xt-eX3Mw""}]},""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""/9ZYmYlS.3KEQ5rb6zxfyV100s4w04Gb/sHVOLazSgAvOuuPSajo=""},{""name"":""accept"",""value"":""application/json""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[-1968,0],""id"":""79ce7dbd-01a4-4e64-8df1-5f10240e0a7b"",""name"":""Retrieve Profile"",""onError"":""continueErrorOutput""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""69e34ec1-37f4-4679-8b2d-a981b65ba943"",""leftValue"":""={{ $json.object }}"",""rightValue"":""=ChatStarted"",""operator"":{""type"":""string"",""operation"":""equals"",""name"":""filter.operator.equals""}}],""combinator"":""or""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-1328,-160],""id"":""e4ce5552-5db4-403a-868a-05d0cca82e92"",""name"":""If1""},{""parameters"":{""amount"":2,""unit"":""minutes""},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[-688,272],""id"":""a54e64c7-3bca-4416-bdcc-c3e279744acc"",""name"":""Wait2"",""webhookId"":""aa651ae0-5a36-4cbe-97b3-4fa81093e1f6""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Search records').item.json.id }}"",""Email"":""={{ $json.contact_info['emails'][0] }}"",""username"":""={{ $json.public_identifier }}""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""}],""readOnly"":false,""removed"":true},{""id"":""dm-Mail"",""displayName"":""dm-Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""Mail , dm ready"",""value"":""Mail , dm ready""},{""name"":""rewrite"",""value"":""rewrite""},{""name"":""waiting for confirmation"",""value"":""waiting for confirmation""}],""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail "",""displayName"":""proposed Mail "",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Instagram Leads"",""displayName"":""Instagram Leads"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""array"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-1744,-192],""id"":""170b28dc-d30f-4145-bf84-c7945f119270"",""name"":""Update Username"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""method"":""POST"",""url"":""https://api24.unipile.com:15433/api/v1/chats"",""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""/9ZYmYlS.3KEQ5rb6zxfyV100s4w04Gb/sHVOLazSgAvOuuPSajo=""},{""name"":""accept"",""value"":""application/json""}]},""sendBody"":true,""contentType"":""multipart-form-data"",""bodyParameters"":{""parameters"":[{""name"":""account_id"",""value"":""HNsTHYn7SCStd6xt-eX3Mw""},{""name"":""attendees_ids[]"",""value"":""={{ $('Retrieve Profile').item.json.provider_id }}""},{""name"":""text"",""value"":""=Hi ,{{ $('Retrieve Profile').item.json.first_name }}\n\n{{ $('Search records').item.json[\""Proposed DM\""] }}""},{""name"":""linkedin[api]"",""value"":""classic""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[-1520,-48],""id"":""0636600e-9bbf-41e1-8d0f-854ed7c3d719"",""name"":""HTTP Request"",""onError"":""continueErrorOutput""},{""parameters"":{""rule"":{""interval"":[{""triggerAtHour"":6}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[-2816,-16],""id"":""ba5b2001-6b8c-4629-bb31-334784209d84"",""name"":""Schedule Trigger1""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Status"":""error"",""id"":""={{ $('Search records').item.json.id }}""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM , Mail Ready"",""value"":""DM , Mail Ready""},{""name"":""DM sent"",""value"":""DM sent""}],""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail "",""displayName"":""proposed Mail "",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-1008,-16],""id"":""862c47b1-3a18-4299-9756-c770747b9ec2"",""name"":""Update record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}}],""connections"":{""Search records"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Code1"":{""main"":[[{""node"":""Retrieve Profile"",""type"":""main"",""index"":0}]]},""Loop Over Items1"":{""main"":[[],[{""node"":""Code1"",""type"":""main"",""index"":0}]]},""Retrieve Profile"":{""main"":[[{""node"":""Update Username"",""type"":""main"",""index"":0}]]},""If1"":{""main"":[[{""node"":""Update record"",""type"":""main"",""index"":0}],[{""node"":""Update record1"",""type"":""main"",""index"":0}]]},""Update record"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""Wait2"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Update Username"":{""main"":[[{""node"":""HTTP Request"",""type"":""main"",""index"":0}]]},""HTTP Request"":{""main"":[[{""node"":""If1"",""type"":""main"",""index"":0}],[{""node"":""Update record1"",""type"":""main"",""index"":0}]]},""Schedule Trigger1"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Update record1"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-03T05:08:55.135+00:00"",""updatedAt"":""2025-11-11T13:37:57.765+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger1"":{""recurrenceRules"":[]}},""pinData"":{},""versionId"":""b93fed51-f09d-40c1-809b-b7dee44672ba"",""triggerCount"":1,""id"":""cZyvxh41CwXiTuTD"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":19}"
PNHBBPZjKMHYbqnx,"{""name"":""5. Mail"",""active"":true,""nodes"":[{""parameters"":{""rule"":{""interval"":[{}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[0,0],""id"":""131dc852-d1f1-4a59-8e60-dab4a1160a27"",""name"":""Schedule Trigger""},{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""filterByFormula"":""AND(NOT({Email} = \""\""),{mail}='todo')"",""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[208,0],""id"":""70ee0669-3133-464c-867d-4af60ee4accd"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[416,0],""id"":""d772cbbc-40f0-4d31-ba01-7b00f620fbd2"",""name"":""Loop Over Items""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Loop Over Items').item.json.id }}"",""mail"":""sent""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[832,96],""id"":""133bb3aa-dad3-4eed-be21-376233e3784a"",""name"":""Update record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""fromEmail"":""info@kirabiz.in"",""toEmail"":""pw2.ojee@gmail.com"",""subject"":""={{ $json['Mail Subject'] }}"",""html"":""={{ $json['proposed Mail'] }}"",""options"":{""appendAttribution"":false}},""type"":""n8n-nodes-base.emailSend"",""typeVersion"":2.1,""position"":[656,16],""id"":""7f76c597-8ba3-4022-b9f3-0072a156f16d"",""name"":""Send email"",""webhookId"":""cea9156a-6319-4344-9508-3c7ee8fe330b"",""credentials"":{""smtp"":{""id"":""2aiRAznGco8RYbRe"",""name"":""SMTP account""}}},{""parameters"":{""amount"":30},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[1040,96],""id"":""a8a11cd3-77ed-4a1b-a3ea-5de28d1d41df"",""name"":""Wait"",""webhookId"":""6a2de5aa-46f0-426b-a827-3d76801fcaaf""}],""connections"":{""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Search records"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[],[{""node"":""Send email"",""type"":""main"",""index"":0}]]},""Update record"":{""main"":[[{""node"":""Wait"",""type"":""main"",""index"":0}]]},""Send email"":{""main"":[[{""node"":""Update record"",""type"":""main"",""index"":0}]]},""Wait"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-03T09:06:12.912+00:00"",""updatedAt"":""2025-11-10T17:25:00.86+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[]}},""pinData"":{},""versionId"":""f8634f58-6c72-4f7a-8217-3f9e1fa4f6b7"",""triggerCount"":1,""id"":""PNHBBPZjKMHYbqnx"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":17}"
oXACgwQfVU6I3TKb,"{""name"":""Remove Duplicates"",""active"":false,""nodes"":[{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""filterByFormula"":""NOT({LinkedIn URL}='')"",""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[208,0],""id"":""a0f9bb93-1387-42ee-8301-0d20fe95538d"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""compare"":""selectedFields"",""fieldsToCompare"":""LinkedIn URL"",""options"":{}},""type"":""n8n-nodes-base.removeDuplicates"",""typeVersion"":2,""position"":[416,0],""id"":""7b6636c7-9105-4c33-b751-e937d4031b6c"",""name"":""Remove Duplicates""},{""parameters"":{""operation"":""deleteRecord"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""id"":""={{ $json.id }}""},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[944,16],""id"":""f4d7442e-c986-40ac-9059-2ce20b1c00e5"",""name"":""Delete a record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[624,0],""id"":""0557f626-f626-4bb3-bca4-739bb513f4ca"",""name"":""Loop Over Items""},{""parameters"":{""rule"":{""interval"":[{""field"":""hours""}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[0,0],""id"":""1fcc730a-9ae8-41dc-b37d-c5af8d0f3878"",""name"":""Schedule Trigger""}],""connections"":{""Search records"":{""main"":[[{""node"":""Remove Duplicates"",""type"":""main"",""index"":0}]]},""Remove Duplicates"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[],[{""node"":""Delete a record"",""type"":""main"",""index"":0}]]},""Delete a record"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-04T06:47:07.523+00:00"",""updatedAt"":""2025-11-10T17:27:46.051+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[]}},""pinData"":{},""versionId"":""8c4a1846-ef74-46aa-b5c8-555efe824bcf"",""triggerCount"":1,""id"":""oXACgwQfVU6I3TKb"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":null,""isArchived"":false,""versionCounter"":6}"
CyTdLx2gqoKlfCEq,"{""name"":""1 Linked In Scrapping"",""active"":true,""nodes"":[{""parameters"":{""content"":""## üéØ LinkedIn Lead Scraping Automation Workflow\n\nThis workflow automatically scrapes LinkedIn profiles based on natural language queries and saves results to Google Sheets.\n\n### üìã Process Flow:\n1. **üí¨ Input Processing** ‚Üí Receive natural language search request via chat\n2. **üß† AI Analysis** ‚Üí Parse query using GPT-4 to extract roles, location, filters\n3. **üîç Search Building** ‚Üí Construct optimized LinkedIn search query\n4. **üåê Data Scraping** ‚Üí Execute search via SerpAPI to find LinkedIn profiles  \n5. **üìä Data Processing** ‚Üí Extract and format lead information (name, role, company, email)\n6. **üìà Storage** ‚Üí Save all leads to Google Sheets for easy access\n\n### ‚ú® Key Features:\n- Natural language input (e.g., \""Find 25 AI engineers in Mumbai\"")\n- Automatic email extraction from profile snippets\n- Smart query optimization for better results\n- Structured data output with timestamps"",""height"":320,""width"":700,""color"":4},""type"":""n8n-nodes-base.stickyNote"",""typeVersion"":1,""position"":[-912,560],""id"":""dfefe192-e5c2-4329-8f8d-d11f5f1d02b5"",""name"":""Sticky Note""},{""parameters"":{""content"":""## üí¨ Natural Language Input Processing\n\n### What You Can Ask:\n- \""Find 50 React developers in San Francisco\""\n- \""Search for AI automation specialists in Mumbai\"" \n- \""Get me 25 startup founders with email addresses\""\n- \""Find senior data scientists at YC companies\""\n\n### AI Parser Features:\n- Extracts roles, location, lead count, filters\n- Handles multiple variations and synonyms\n- Supports complex queries with multiple criteria\n- Validates output with structured JSON schema"",""height"":724,""width"":672,""color"":2},""type"":""n8n-nodes-base.stickyNote"",""typeVersion"":1,""position"":[0,32],""id"":""2c0101fa-cb70-4ae3-8990-5ce580fdaa48"",""name"":""Sticky Note10""},{""parameters"":{""content"":""## üîç Smart Search & Data Extraction\n\n### Search Optimization:\n- Builds targeted LinkedIn site searches\n- Combines role keywords with location filters\n- Optimizes query structure for better results\n- Handles multiple locations (e.g., \""SF or NYC\"")\n\n### Data Extraction:\n- Scrapes name, role, company, connections\n- Extracts email addresses from snippets\n- Captures LinkedIn profile URLs\n- Adds timestamp for tracking"",""height"":720,""width"":768},""type"":""n8n-nodes-base.stickyNote"",""typeVersion"":1,""position"":[704,32],""id"":""b97606a6-11b2-437c-97d0-1ca02772e622"",""name"":""Sticky Note11""},{""parameters"":{""content"":""## üìà Data Storage & Management\n\n### Google Sheets Output:\n- **Name** - Full name extracted from profile\n- **Role** - Job title and position  \n- **Company** - Current employer\n- **Connections** - Follower/connection count\n- **LinkedIn URL** - Direct profile link\n- **Email** - Extracted email address (if available)\n- **Snippet** - Profile description preview\n- **Scraped At** - Timestamp of data collection\n\n### üí° Pro Tips:\n- Data is automatically organized and timestamped\n- Email extraction helps with outreach campaigns\n- Results can be filtered and sorted in sheets"",""height"":736,""width"":696,""color"":6},""type"":""n8n-nodes-base.stickyNote"",""typeVersion"":1,""position"":[1520,32],""id"":""068212e1-7442-4077-ac79-af7d9f5a502e"",""name"":""Sticky Note12""},{""parameters"":{""content"":""## üë®‚Äçüíª Creator Information\n\n**Created by:** Lakshit Ukani  \nüîó **LinkedIn:** [Connect with me](https://www.linkedin.com/in/lakshit-ukani/)\nüîó **Youtube:** [Subscribe to my Channel](https://www.youtube.com/@lakshit-ukani?sub_confirmation=1)\n\n### ü§ù Community & Support\nüí¨ **Join Community:** [Skool Community Link](https://www.skool.com/ai-automation-club-7843)   \nüìö **Documentation:** [LinkedIn Lead Gen Guide](https://developers.linkedin.com/docs)  \n\n### üìû Need Help?\n- **Quick Questions:** Comment on the YouTube video\n- **Workflow Issues:** Post in our community  \n- **Business Inquiries:** Connect via LinkedIn"",""height"":360,""width"":540,""color"":7},""type"":""n8n-nodes-base.stickyNote"",""typeVersion"":1,""position"":[-928,144],""id"":""4610467e-313a-476b-96e3-1727b98a50aa"",""name"":""Sticky Note13""},{""parameters"":{""promptType"":""define"",""text"":""=You are an instruction parser for an AI lead scraping system. Parse the user request and extract structured information.\nUser message is -{{ $json['Description of the lead'] }}\nRules:\n1. Platform Detection\nLook for platform mention in user query. If no platform is mentioned, default to \""LinkedIn\"".\n2. Role Extraction\nExtract job titles, skills, or professional categories. Include variations and synonyms:\n\n\""AI engineer\"" OR \""ML engineer\"" OR \""Machine Learning engineer\""\n\""founder\"" OR \""CEO\"" OR \""co-founder\""\n\""developer\"" OR \""software engineer\"" OR \""programmer\""\n\""data scientist\"" OR \""data analyst\"" OR \""ML researcher\""\n\n3. Lead Count\nExtract numbers mentioned in phrases like:\n\n\""20 leads\"", \""find 50\"", \""at least 30\"", \""I want 25\""\nIf not specified, default to 10\n\n4. Filters\nExtract constraints and qualifiers including:\nCompany Type:\n\n\""startup\"", \""enterprise\"", \""funded company\"", \""series A\"", \""series B\"", \""YC company\"", \""unicorn\""\n\""small company\"", \""large corporation\"", \""Fortune 500\""\nif user has defined the folowers then return only that number\nlike - 1000 , 5000 \nExperience Level:\n\n\""senior\"", \""junior\"", \""mid-level\"", \""entry-level\""\n\""5+ years\"", \""10+ years experience\"", \""recent graduate\""\n\""lead\"", \""principal\"", \""staff\"", \""director level\""\n\nContact Information:\n\n\""email available\"", \""LinkedIn profile\"", \""phone number\"", \""contact details\""\n\nIndustry Specific:\n\n\""fintech\"", \""healthcare\"", \""SaaS\"", \""e-commerce\"", \""edtech\"", \""blockchain\""\n\""AI/ML\"", \""cybersecurity\"", \""biotech\"", \""cleantech\""\n\nCompany Size:\n\n\""team of 10-50\"", \""500+ employees\"", \""small team\"", \""large organization\""\n\nFunding Status:\n\n\""recently funded\"", \""profitable\"", \""bootstrap\"", \""venture backed\""\n\""raised funding\"", \""IPO\"", \""acquired\""\n\n5. Location\nExtract geographic information:\n\nCities: \""San Francisco\"", \""New York\"", \""Mumbai\"", \""London\""\nStates/Regions: \""California\"", \""Texas\"", \""Maharashtra\""\nCountries: \""United States\"", \""India\"", \""United Kingdom\""\nRemote preferences: \""remote\"", \""remote-first\"", \""distributed team\""\nMultiple locations: \""SF or NYC\"", \""US or Canada\""\n\n6. Keywords\nExtract relevant search terms and synonyms that would be useful for search optimization:\n\nTechnical skills, tools, programming languages\nIndustry buzzwords and terminology\nCompany descriptors and qualifiers\n\nOutput Format:\nRespond ONLY with valid JSON following the specified schema. No explanations, comments, or additional text.\nExample Input Processing:\nInput: \""search for profile which have AI automation and are located in Mumbai\""\nExpected Output:\njson{\n  \""platform\"": \""LinkedIn\"",\n  \""roles\"": [\""AI automation specialist\"", \""AI automation engineer\""],\n  \""lead_count\"": 10,\n  \""filters\"": [\""AI automation experience\"", \""automation tools\""],\n  \""location\"": \""Mumbai\"",\n  \""keywords\"": [\""AI\"", \""automation\"", \""machine learning\"", \""artificial intelligence\""]\n}\nInput: \""Find 25 senior software engineers at YC startups in San Francisco with email addresses who has more that 1000 followers\""\nExpected Output:\njson{\n  \""platform\"": \""LinkedIn\"",\n  \""roles\"": [\""senior software engineer\"", \""software engineer\""],\n  \""lead_count\"": 25,\n  \""filters\"": [\""YC company\"", \""startup\"", \""senior level\"", \""email available\"",\""10000\""],\n  \""location\"": \""San Francisco\"",\n  \""keywords\"": [\""software engineer\"", \""Y Combinator\"", \""startup\"", \""senior\""]\n}\n\n\""example_outputs\"": {\n    \""example_1\"": {\n      \""input\"": \""search for profile which have AI automation and are located in Mumbai\"",\n      \""output\"": {\n        \""platform\"": \""LinkedIn\"",\n        \""roles\"": [\""AI automation specialist\"", \""AI automation engineer\""],\n        \""lead_count\"": 10,\n        \""filters\"": [\""AI automation experience\"", \""automation tools\""],\n        \""location\"": \""Mumbai\"",\n        \""keywords\"": [\""AI\"", \""automation\"", \""machine learning\"", \""artificial intelligence\""]\n      }\n    },\n    \""example_2\"": {\n      \""input\"": \""Find 25 senior software engineers at YC startups in San Francisco with email addresses\"",\n      \""output\"": {\n        \""platform\"": \""LinkedIn\"",\n        \""roles\"": [\""senior software engineer\"", \""software engineer\""],\n        \""lead_count\"": 25,\n        \""filters\"": [\""YC company\"", \""startup\"", \""senior level\"", \""email available\""],\n        \""location\"": \""San Francisco\"",\n        \""keywords\"": [\""software engineer\"", \""Y Combinator\"", \""startup\"", \""senior\""]\n      }\n    },\n    \""example_3\"": {\n      \""input\"": \""Scrape LinkedIn for AI/ML interns or internship opportunities at startups that have recently received funding. I want at least 20 valid leads\"",\n      \""output\"": {\n        \""platform\"": \""LinkedIn\"",\n        \""roles\"": [\""AI intern\"", \""ML intern\"", \""machine learning intern\"", \""artificial intelligence intern\""],\n        \""lead_count\"": 20,\n        \""filters\"": [\""startup\"", \""recently funded\"", \""internship\"", \""series A\"", \""series B\"", \""venture capital\""],\n        \""location\"": \""\"",\n        \""keywords\"": [\""AI\"", \""ML\"", \""machine learning\"", \""artificial intelligence\"", \""intern\"", \""startup\"", \""funding\""]\n      }\n    },\n    \""example_4\"": {\n      \""input\"": \""Get me 50 CTOs from fintech companies in New York or remote\"",\n      \""output\"": {\n        \""platform\"": \""LinkedIn\"",\n        \""roles\"": [\""CTO\"", \""Chief Technology Officer\"", \""VP Engineering\""],\n        \""lead_count\"": 50,\n        \""filters\"": [\""fintech\"", \""financial technology\"", \""C-level\"", \""executive\""],\n        \""location\"": \""New York OR remote\"",\n        \""keywords\"": [\""CTO\"", \""fintech\"", \""financial technology\"", \""chief technology officer\""]\n      }\n    },\n    \""example_5\"": {\n      \""input\"": \""Find founders on Linkedin who raised Series A in the last 6 months\"",\n      \""output\"": {\n        \""platform\"": \""Linkedin\"",\n        \""roles\"": [\""founder\"", \""CEO\"", \""co-founder\""],\n        \""lead_count\"": 10,\n        \""filters\"": [\""series A\"", \""recently funded\"", \""last 6 months\"", \""raised funding\""],\n        \""location\"": \""\"",\n        \""keywords\"": [\""founder\"", \""CEO\"", \""series A\"", \""funding\"", \""startup\""]\n      }\n    },\n    \""example_6\"": {\n      \""input\"": \""Search Linkedin for React developers with 5+ years experience who work at unicorn companies\"",\n      \""output\"": {\n        \""platform\"": \""Linkedin\"",\n        \""roles\"": [\""React developer\"", \""Frontend developer\"", \""Full-stack developer\""],\n        \""lead_count\"": 10,\n        \""filters\"": [\""5+ years experience\"", \""unicorn company\"", \""senior level\"", \""billion dollar valuation\""],\n        \""location\"": \""\"",\n        \""keywords\"": [\""React\"", \""JavaScript\"", \""frontend\"", \""unicorn\"", \""developer\""]\n      }\n    }\nUser request: \n{{ $json['Description of the lead'] }}"",""hasOutputParser"":true},""type"":""@n8n/n8n-nodes-langchain.chainLlm"",""typeVersion"":1.6,""position"":[688,368],""id"":""fe7365dd-9053-4d6a-b781-5f786ed88772"",""name"":""üß† AI Query Parser1""},{""parameters"":{""jsCode"":""// LinkedIn Profile Search Query Builder - Profile Only\nconst input = items[0].json.output;\nlet totalLeads = 0;\nlet page=1;\n// Extract and normalize data\nconst roles = input.roles || [];\nconst leadCount = input.lead_count || input.leadCount || 10;\nconst filters = input.filters || [];\nconst location = input.location || '';\nconst keywords = input.keywords || [];\n\n// Helper function to create quoted phrases with OR logic\nfunction createQuotedTerms(terms) {\n  return terms.filter(term => term && term.trim())\n              .map(term => `\""${term.trim()}\""`)\n              .join(' OR ');\n}\n\n// Helper function to build location query\nfunction buildLocationQuery(location) {\n  if (!location) return '';\n  \n  // Handle multiple locations separated by OR, comma, or \""or\""\n  const locationTerms = location.split(/\\s+(?:OR|or)\\s+|,\\s*/)\n    .map(loc => loc.trim())\n    .filter(loc => loc);\n  \n  if (locationTerms.length === 1) {\n    return `\""${locationTerms[0]}\""`;\n  } else if (locationTerms.length > 1) {\n    return `(${locationTerms.map(loc => `\""${loc}\""`).join(' OR ')})`;\n  }\n  return '';\n}\n\n// Build single LinkedIn profile search query\nconst roleQuery = createQuotedTerms(roles);\nconst locationQuery = buildLocationQuery(location);\nconst filterQuery = filters.length > 0 ? createQuotedTerms(filters) : '';\nconst keywordQuery = keywords.length > 0 ? createQuotedTerms(keywords) : '';\n\n// Build LinkedIn profile query\nlet profileQuery = 'site:linkedin.com/in';\nconst queryParts = [];\n\nif (roleQuery) queryParts.push(roleQuery);\nif (locationQuery) queryParts.push(locationQuery);\nif (filterQuery) queryParts.push(filterQuery);\nif (keywordQuery && !roleQuery) queryParts.push(keywordQuery); // Only add keywords if no roles\n\nif (queryParts.length > 0) {\n  profileQuery += ` ${queryParts.join(' ')}`;\n}\n\n// Return single result for LinkedIn profiles only\nreturn [{\n  json: {\n    searchQuery: profileQuery.trim(),\n    leadCount:leadCount ,\n    totalLeads:totalLeads,\n    page:page,\n    platform: 'linkedin'\n  }\n}];""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[992,368],""id"":""e56c546e-022b-48e3-845b-3770a60f3cd4"",""name"":""üîç LinkedIn Search Builder1""},{""parameters"":{""url"":""=https://serpapi.com/search.json"",""sendQuery"":true,""queryParameters"":{""parameters"":[{""name"":""engine"",""value"":""=google""},{""name"":""q"",""value"":""={{ $json.searchQuery }}""},{""name"":""api_key"",""value"":""a368106a8e466f2a3b42bdfd77a06419d43b09e3521a3ab153841993ef22da2c""},{""name"":""num"",""value"":""={{ $json.leadCount }}""},{""name"":""start"",""value"":""={{ $json.page }}""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[1520,352],""id"":""f74553b1-0097-4ba5-9cb2-a4971f327c0f"",""name"":""üåê Google Search Engine1""},{""parameters"":{""options"":{}},""type"":""@n8n/n8n-nodes-langchain.lmChatGoogleGemini"",""typeVersion"":1,""position"":[576,576],""id"":""0e0aa3d5-7c3e-472c-b3a2-4065254271a8"",""name"":""Google Gemini Chat Model1"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""operation"":""upsert"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblBYjPAYjGqIN7aK"",""mode"":""list"",""cachedResultName"":""Leads Descriptions"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblBYjPAYjGqIN7aK""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $json.id }}"",""Status"":""Done""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""Description of the lead"",""displayName"":""Description of the lead"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""Todo"",""value"":""Todo""},{""name"":""In progress"",""value"":""In progress""},{""name"":""Done"",""value"":""Done""}],""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[1520,640],""id"":""979342b5-6e80-4243-a57c-26d5c4de2198"",""name"":""Create or update a record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblBYjPAYjGqIN7aK"",""mode"":""list"",""cachedResultName"":""Leads Descriptions"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblBYjPAYjGqIN7aK""},""filterByFormula"":""{Status}=\""Todo\"""",""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[224,368],""id"":""857a5ad0-f5c9-4155-867c-4118285708c6"",""name"":""Search records1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""create"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Name"":""={{ $json.name }}"",""Status"":""In progress"",""Role"":""={{ $json.role }}"",""Connections"":""={{ $json.connections }}"",""Company"":""={{ $json.company }}"",""LinkedIn URL"":""={{ $json.linkedinUrl }}"",""Email"":""={{ $json.email }}"",""Snippet"":""={{ $json.snippet }}""},""matchingColumns"":[],""schema"":[{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""},{""name"":""Ignored"",""value"":""Ignored""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""profile"",""displayName"":""profile"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""open"",""value"":""open""},{""name"":""closed"",""value"":""closed""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{""typecast"":false}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[2096,464],""id"":""8e305986-1d79-43d7-9744-f8559aa763a5"",""name"":""Create a record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""schemaType"":""manual"",""inputSchema"":""{\n  \""type\"": \""object\"",\n  \""properties\"": {\n    \""platform\"": {\n      \""type\"": \""string\"",\n      \""enum\"": [\""LinkedIn\""]\n    },\n    \""roles\"": {\n      \""type\"": \""array\"",\n      \""items\"": {\n        \""type\"": \""string\""\n      }\n    },\n    \""lead_count\"": {\n      \""type\"": \""integer\"",\n      \""minimum\"": 1,\n      \""maximum\"": 1000\n    },\n    \""filters\"": {\n      \""type\"": \""array\"",\n      \""items\"": {\n        \""type\"": \""string\""\n      }\n    },\n    \""location\"": {\n      \""type\"": \""string\""\n    },\n    \""keywords\"": {\n      \""type\"": \""array\"",\n      \""items\"": {\n        \""type\"": \""string\""\n      }\n    }\n  },\n  \""required\"": [\""platform\"", \""roles\"", \""lead_count\"", \""filters\"", \""location\"", \""keywords\""]\n}""},""type"":""@n8n/n8n-nodes-langchain.outputParserStructured"",""typeVersion"":1.2,""position"":[960,592],""id"":""364988e8-2012-4736-8b4b-ded48e43bac7"",""name"":""üìã JSON Structure Validator""},{""parameters"":{""assignments"":{""assignments"":[{""id"":""aa7dc4ae-3987-439f-9255-e7913f018084"",""name"":""page"",""value"":""={{ $('If').item.json.page +1 }}"",""type"":""number""},{""id"":""e0257e5b-5895-42b0-885b-775aa82a9680"",""name"":""totalLeads"",""value"":""={{ $('If').item.json.totalLeads +10 }}"",""type"":""number""},{""id"":""130ae94e-35d6-48e9-92ee-50c0e2b41c76"",""name"":""leadCount"",""value"":""={{ $('If').item.json.leadCount }}"",""type"":""number""},{""id"":""863ec487-a8ba-4cfb-a4b1-54198f37f952"",""name"":""searchQuery"",""value"":""={{ $('If').item.json.searchQuery }}"",""type"":""string""},{""id"":""a13d2435-5375-4a6a-ae9a-b245cd1430fd"",""name"":""id"",""value"":""={{ $('If').item.json.id }}"",""type"":""string""},{""id"":""c88ce412-5192-491e-a0b5-1bbf635618c8"",""name"":""output.filters[1]"",""value"":""={{ $('If').item.json.output.filters[1] }}"",""type"":""string""}]},""options"":{}},""type"":""n8n-nodes-base.set"",""typeVersion"":3.4,""position"":[2272,464],""id"":""7459eec2-1a63-4a39-b89f-e58218534b42"",""name"":""Edit Fields2""},{""parameters"":{""jsCode"":""// This array will hold all parsed leads\nconst leads = [];\n\n// Simple regex to find emails in text\nconst emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-z]{2,}/gi;\n\n// Loop over the 'organic_results' array from SerpAPI\nfor (const result of $('üåê Google Search Engine1').first().json.organic_results || []) {\n\n  // Extract title, link, and snippet from each search result\n  const nameAndRole = result.title || \""\"";           // e.g. \""Jane Doe - SaaS Founder\""\n  const link = result.link || \""\"";                   // LinkedIn profile URL\n  const connections = result.displayed_link || \""\"";   // 590+ followers\n  const snippet = result.snippet || \""\"";             // Description snippet from Google\n  const extensions = result.rich_snippet?.top?.extensions || [];  // Additional info, often includes company\n\n  // Split title into name and role (based on \"" - \"")\n  const [namePart, rolePart] = nameAndRole.split(\"" - \"");\n\n  // Try to get company name from extensions (usually in 3rd position)\n  let company = \""\"";\n  if (extensions.length >= 3 && typeof extensions[2] === \""string\"") {\n    company = extensions[2].trim(); // Safe trim only if it's a string\n  }\n\n  // Try to extract email from snippet using regex\n  let emails = snippet.match(emailRegex);\n  // Use the first email if available, else empty string\n  let email = (emails && emails.length > 0) ? emails[0].trim() : \""\"";\n\n  // Push the cleaned lead data into the leads array\n  leads.push({\n    json: {\n      name: namePart?.trim() || \""\"",       // Safely trim name\n      role: rolePart?.trim() || \""\"",       // Safely trim role\n      company: company,                   // Already trimmed\n      connections: connections,\n      linkedinUrl: link,\n      email: email,                      // Extracted email if found\n      snippet: snippet,\n      scrapedAt: new Date().toISOString() // Timestamp when scraped\n    }\n  });\n}\n\n// Return all extracted leads to the next node\nreturn leads;\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[1792,464],""id"":""8fdbd061-c89c-4355-b085-aa4901c2038f"",""name"":""üìä Lead Data Extractor""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""loose"",""version"":2},""conditions"":[{""id"":""9a438802-ed16-4594-b359-43d5a8c88955"",""leftValue"":""={{ $json.totalLeads }}"",""rightValue"":""={{ $json.leadCount }}"",""operator"":{""type"":""number"",""operation"":""lt""}}],""combinator"":""or""},""looseTypeValidation"":true,""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[1328,368],""id"":""8af6a4ea-165f-42c3-9aaf-bf2e346d6c15"",""name"":""If""},{""parameters"":{""assignments"":{""assignments"":[{""id"":""cb27906f-f6f7-4f24-a1b3-a1422f7183fa"",""name"":""page"",""value"":""={{ $json.page }}"",""type"":""number""},{""id"":""dbaf8e00-e18c-4256-b72f-3e9938e335e2"",""name"":""searchQuery"",""value"":""={{ $json.searchQuery }}"",""type"":""string""},{""id"":""e0aa3bf1-4de8-4ab8-9df7-c8e7d92447dc"",""name"":""totalLeads"",""value"":""={{ $json.totalLeads }}"",""type"":""number""},{""id"":""4731fee9-8670-42cd-a930-e0d368fe141b"",""name"":""leadCount"",""value"":""={{ $json.leadCount }}"",""type"":""number""},{""id"":""0558cf2c-9c9c-400e-89d8-eca4df2a976b"",""name"":""id"",""value"":""={{ $('Search records1').item.json.id }}"",""type"":""string""}]},""options"":{}},""type"":""n8n-nodes-base.set"",""typeVersion"":3.4,""position"":[1136,368],""id"":""d835c099-0e98-4195-9a9a-a910c2cafb2b"",""name"":""Edit Fields3""},{""parameters"":{""rule"":{""interval"":[{""field"":""hours""}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[16,368],""id"":""4b399add-8555-46e5-96ac-bfc97613cbeb"",""name"":""Schedule Trigger""},{""parameters"":{},""type"":""n8n-nodes-base.limit"",""typeVersion"":1,""position"":[432,368],""id"":""b99291a8-d9d0-4b34-b0b3-65a162c37284"",""name"":""Limit""}],""connections"":{""üß† AI Query Parser1"":{""main"":[[{""node"":""üîç LinkedIn Search Builder1"",""type"":""main"",""index"":0}]]},""üîç LinkedIn Search Builder1"":{""main"":[[{""node"":""Edit Fields3"",""type"":""main"",""index"":0}]]},""üåê Google Search Engine1"":{""main"":[[{""node"":""üìä Lead Data Extractor"",""type"":""main"",""index"":0}]]},""Google Gemini Chat Model1"":{""ai_languageModel"":[[{""node"":""üß† AI Query Parser1"",""type"":""ai_languageModel"",""index"":0}]]},""Search records1"":{""main"":[[{""node"":""Limit"",""type"":""main"",""index"":0}]]},""Create a record1"":{""main"":[[{""node"":""Edit Fields2"",""type"":""main"",""index"":0}]]},""üìã JSON Structure Validator"":{""ai_outputParser"":[[{""node"":""üß† AI Query Parser1"",""type"":""ai_outputParser"",""index"":0}]]},""Edit Fields2"":{""main"":[[{""node"":""If"",""type"":""main"",""index"":0}]]},""üìä Lead Data Extractor"":{""main"":[[{""node"":""Create a record1"",""type"":""main"",""index"":0}]]},""If"":{""main"":[[{""node"":""üåê Google Search Engine1"",""type"":""main"",""index"":0}],[{""node"":""Create or update a record1"",""type"":""main"",""index"":0}]]},""Edit Fields3"":{""main"":[[{""node"":""If"",""type"":""main"",""index"":0}]]},""Schedule Trigger"":{""main"":[[{""node"":""Search records1"",""type"":""main"",""index"":0}]]},""Limit"":{""main"":[[{""node"":""üß† AI Query Parser1"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-03T05:07:59.551+00:00"",""updatedAt"":""2025-11-11T13:27:23.711+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[6]}},""pinData"":{},""versionId"":""cae40f06-fba7-414f-93f9-a2c7b7ab9b36"",""triggerCount"":1,""id"":""CyTdLx2gqoKlfCEq"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":31}"
P1ZWH7Y7LjbfdiXa,"{""name"":""3. Check Connection Request Accepted"",""active"":true,""nodes"":[{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""filterByFormula"":""OR({Status} = \""Request Sent\"",{Status}='error')"",""returnAll"":false,""limit"":20,""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-3344,-64],""id"":""ce354eeb-728d-4fe5-9dc5-2207eb8111fa"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""jsCode"":""// Extract the LinkedIn username from the profile URL\nreturn items.map(item => {\n  const rawUrl =$input.first().json['LinkedIn URL'] || \""\"";\n  \n  // Match everything after 'linkedin.com/in/' using regex\n  const match = rawUrl.match(/linkedin\\.com\\/in\\/([^/?#]+)/i);\n  \n  const username = match ? decodeURIComponent(match[1]) : null;\n\n  return {\n    json: {\n      ...item.json,\n      linkedInUsername: username  // Add extracted username to item\n    }\n  };\n});\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-2880,-32],""id"":""48678a0f-ed0d-4dee-9915-06032eba9d71"",""name"":""Code1""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Search records').item.json.id }}"",""Status"":""accepted""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""}],""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail "",""displayName"":""proposed Mail "",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-1568,-304],""id"":""baab3d80-ef83-4507-b910-b8192b503b2d"",""name"":""Update record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""rule"":{""interval"":[{""triggerAtHour"":1}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[-3584,-80],""id"":""f55c9717-79f1-46ff-8580-3c412dd6bf07"",""name"":""Schedule Trigger""},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[-3136,-64],""id"":""4ecd72c1-b4e5-43c5-859c-c0e79ab58f15"",""name"":""Loop Over Items1""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""69e34ec1-37f4-4679-8b2d-a981b65ba943"",""leftValue"":""={{ $json.network_distance }}"",""rightValue"":""=FIRST_DEGREE"",""operator"":{""type"":""string"",""operation"":""equals"",""name"":""filter.operator.equals""}}],""combinator"":""or""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-2176,-64],""id"":""606816f9-a538-4c79-851c-4ef072bb9534"",""name"":""If1""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""b44ec466-6094-4195-b5d3-2d0360d8779e"",""leftValue"":""={{ $json.invitation.status }}"",""rightValue"":""PENDING"",""operator"":{""type"":""string"",""operation"":""equals""}}],""combinator"":""and""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-1872,-48],""id"":""4b528396-195b-4f1b-bcd4-a0adcf88dca4"",""name"":""If2""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Loop Over Items1').item.json.id }}"",""Status"":""Request Sent""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""},{""name"":""Ignored"",""value"":""Ignored""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""profile"",""displayName"":""profile"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""open"",""value"":""open""},{""name"":""closed"",""value"":""closed""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-1552,128],""id"":""24e88e89-5d49-47b5-a912-60c91b14649a"",""name"":""Update record2"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""amount"":30},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[-1184,368],""id"":""33240fbc-9645-47d2-8469-7a894d62d539"",""name"":""Wait2"",""webhookId"":""00b8abef-3b77-483f-9bc8-2b5abe281133""},{""parameters"":{""url"":""=https://api24.unipile.com:15433/api/v1/users/{{ $json.linkedInUsername }}"",""sendQuery"":true,""queryParameters"":{""parameters"":[{""name"":""account_id"",""value"":""HNsTHYn7SCStd6xt-eX3Mw""}]},""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""/9ZYmYlS.3KEQ5rb6zxfyV100s4w04Gb/sHVOLazSgAvOuuPSajo=""},{""name"":""accept"",""value"":""application/json""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[-2624,-160],""id"":""74de843b-e336-4903-84a2-4ed9d4fe9720"",""name"":""Retrieve Profile1"",""onError"":""continueErrorOutput""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Loop Over Items1').item.json.id }}"",""Status"":""Ignored""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""},{""name"":""Ignored"",""value"":""Ignored""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""profile"",""displayName"":""profile"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""open"",""value"":""open""},{""name"":""closed"",""value"":""closed""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-1552,320],""id"":""9c94fbe3-94e8-45a4-9834-78b1c7cabafa"",""name"":""Update record3"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}}],""connections"":{""Search records"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Code1"":{""main"":[[{""node"":""Retrieve Profile1"",""type"":""main"",""index"":0}]]},""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Loop Over Items1"":{""main"":[[],[{""node"":""Code1"",""type"":""main"",""index"":0}]]},""If1"":{""main"":[[{""node"":""Update record"",""type"":""main"",""index"":0}],[{""node"":""If2"",""type"":""main"",""index"":0}]]},""If2"":{""main"":[[{""node"":""Update record2"",""type"":""main"",""index"":0}],[{""node"":""Update record3"",""type"":""main"",""index"":0}]]},""Update record2"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""Update record"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""Wait2"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Retrieve Profile1"":{""main"":[[{""node"":""If1"",""type"":""main"",""index"":0}]]},""Update record3"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-03T05:08:42.132+00:00"",""updatedAt"":""2025-11-11T13:36:16.998+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[]}},""pinData"":{},""versionId"":""3e63435f-2db5-4576-9a30-98d56944140a"",""triggerCount"":1,""id"":""P1ZWH7Y7LjbfdiXa"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":17}"
VKGPNIhto3zmXyCO,"{""name"":""2. Connection Request"",""active"":true,""nodes"":[{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""filterByFormula"":""{Status} = 'Connection Request'"",""returnAll"":false,""limit"":15,""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-2256,-80],""id"":""ca4c09d0-40e4-46fc-96ed-e5f9596b0f3b"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""method"":""POST"",""url"":""https://api24.unipile.com:15433/api/v1/users/invite"",""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""/9ZYmYlS.3KEQ5rb6zxfyV100s4w04Gb/sHVOLazSgAvOuuPSajo=""},{""name"":""accept"",""value"":""application/json""},{""name"":""content-type"",""value"":""application/json""}]},""sendBody"":true,""bodyParameters"":{""parameters"":[{""name"":""provider_id"",""value"":""={{ $json.provider_id }}""},{""name"":""account_id"",""value"":""HNsTHYn7SCStd6xt-eX3Mw""},{""name"":""message"",""value"":""={{ $('Loop Over Items1').item.json['Proposed DM'] }}""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[-976,-80],""id"":""1f76cd3d-3ae5-4d97-995e-06c9e47577e0"",""name"":""Send Invite"",""alwaysOutputData"":true,""onError"":""continueRegularOutput""},{""parameters"":{""jsCode"":""// Extract the LinkedIn username from the profile URL\nreturn items.map(item => {\n  const rawUrl =$input.first().json['LinkedIn URL'] || \""\"";\n  \n  // Match everything after 'linkedin.com/in/' using regex\n  const match = rawUrl.match(/linkedin\\.com\\/in\\/([^/?#]+)/i);\n  \n  const username = match ? decodeURIComponent(match[1]) : null;\n\n  return {\n    json: {\n      ...item.json,\n      linkedInUsername: username  // Add extracted username to item\n    }\n  };\n});\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-1792,-48],""id"":""b0c1613c-5968-4dce-81c4-394574c9678f"",""name"":""Code1""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Search records').item.json.id }}"",""Status"":""Request Sent""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""}],""readOnly"":false,""removed"":false},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""proposed Mail "",""displayName"":""proposed Mail "",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-64,-320],""id"":""d331e289-75e9-4e6c-af84-b85d7c306006"",""name"":""Update record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""rule"":{""interval"":[{""field"":""hours"",""hoursInterval"":4}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[-2496,-96],""id"":""915760a1-4ca4-4ff9-bd11-b609902f077c"",""name"":""Schedule Trigger""},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[-2048,-80],""id"":""bee5168f-9a8f-470c-b992-f32682d0a0c7"",""name"":""Loop Over Items1""},{""parameters"":{""url"":""=https://api24.unipile.com:15433/api/v1/users/{{ $json.linkedInUsername }}"",""sendQuery"":true,""queryParameters"":{""parameters"":[{""name"":""account_id"",""value"":""HNsTHYn7SCStd6xt-eX3Mw""}]},""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""/9ZYmYlS.3KEQ5rb6zxfyV100s4w04Gb/sHVOLazSgAvOuuPSajo=""},{""name"":""accept"",""value"":""application/json""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.2,""position"":[-1552,-64],""id"":""9fe0bee5-b42b-4c84-b0a2-498055d9c002"",""name"":""Retrieve Profile"",""onError"":""continueErrorOutput""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""loose"",""version"":2},""conditions"":[{""id"":""69e34ec1-37f4-4679-8b2d-a981b65ba943"",""leftValue"":""={{ $json.error.status }}"",""rightValue"":""=200"",""operator"":{""type"":""dateTime"",""operation"":""equals""}}],""combinator"":""or""},""looseTypeValidation"":true,""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-704,-64],""id"":""e3b4542e-25fc-4aca-8f54-ae0a0de05c9b"",""name"":""If1""},{""parameters"":{""amount"":2,""unit"":""minutes""},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[320,368],""id"":""c003470b-1eb8-4392-8bc3-0e44a11a89c1"",""name"":""Wait2"",""webhookId"":""8aa5e63e-63aa-4e29-8957-e26f672f32af""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Search records').item.json.id }}"",""Status"":""Request Sent""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""profile"",""displayName"":""profile"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""open"",""value"":""open""},{""name"":""closed"",""value"":""closed""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[0,288],""id"":""aba3641a-b92b-4e29-8b4e-d1f97ead4723"",""name"":""Update record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblc3vjzExKDUvmjp"",""mode"":""list"",""cachedResultName"":""Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblc3vjzExKDUvmjp""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Search records').item.json.id }}"",""Status"":""error""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""LinkedIn URL"",""displayName"":""LinkedIn URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Status"",""displayName"":""Status"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""In progress"",""value"":""In progress""},{""name"":""Connection Request"",""value"":""Connection Request""},{""name"":""Request Sent"",""value"":""Request Sent""},{""name"":""error"",""value"":""error""},{""name"":""accepted"",""value"":""accepted""},{""name"":""DM sent"",""value"":""DM sent""},{""name"":""Done"",""value"":""Done""}],""readOnly"":false,""removed"":false},{""id"":""mail"",""displayName"":""mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""todo"",""value"":""todo""}],""readOnly"":false,""removed"":false},{""id"":""profile"",""displayName"":""profile"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""open"",""value"":""open""},{""name"":""closed"",""value"":""closed""}],""readOnly"":false,""removed"":false},{""id"":""username"",""displayName"":""username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Role"",""displayName"":""Role"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Connections"",""displayName"":""Connections"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Snippet"",""displayName"":""Snippet"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Researched"",""displayName"":""Researched"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Proposed DM"",""displayName"":""Proposed DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""proposed Mail"",""displayName"":""proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Change for DM"",""displayName"":""Change for DM"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true},{""id"":""change for mail"",""displayName"":""change for mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":true}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-480,304],""id"":""f6d160cb-785c-4c24-a7a2-51fd61c077fb"",""name"":""Update record2"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""a6d5cbe2-8e37-4ef2-8faa-d64d49fa57aa"",""leftValue"":""={{ $json.network_distance }}"",""rightValue"":""FIRST_DEGREE"",""operator"":{""type"":""string"",""operation"":""equals""}}],""combinator"":""and""},""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-1344,-160],""id"":""cd841388-6fe1-405f-893b-decd3de5f01f"",""name"":""If""},{""parameters"":{""method"":""POST"",""url"":""https://api10.unipile.com:14035/api/v1/chats"",""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""X-API-KEY"",""value"":""NscVntKW.rUbK5Kau2NzVo/XCtzugyjUVLkINwc/U+iR3xvGX/BY=""},{""name"":""accept"",""value"":""application/json""}]},""sendBody"":true,""contentType"":""multipart-form-data"",""bodyParameters"":{""parameters"":[{""name"":""account_id"",""value"":""i2gsr92CQ4uaXNFdV6TXhA""},{""name"":""attendees_ids[]"",""value"":""={{ $('Retrieve Profile').item.json.provider_id }}""},{""name"":""linkedin[api]"",""value"":""classic""},{""name"":""text"",""value"":""=Hi ,{{ $('Retrieve Profile').item.json.first_name }}  {{ $('Search records').item.json[\""Proposed DM\""] }}""}]},""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.3,""position"":[-1136,-256],""id"":""ac398fc2-71fb-4195-a262-7074d4e35dda"",""name"":""HTTP Request""},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""loose"",""version"":2},""conditions"":[{""id"":""69e34ec1-37f4-4679-8b2d-a981b65ba943"",""leftValue"":""={{ $json.object }}"",""rightValue"":""=ChatStarted"",""operator"":{""type"":""string"",""operation"":""equals""}}],""combinator"":""or""},""looseTypeValidation"":true,""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-768,-448],""id"":""af4946e1-c189-4275-b8fa-237ba11eb8a9"",""name"":""If2""}],""connections"":{""Search records"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Code1"":{""main"":[[{""node"":""Retrieve Profile"",""type"":""main"",""index"":0}]]},""Send Invite"":{""main"":[[{""node"":""If1"",""type"":""main"",""index"":0}]]},""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Loop Over Items1"":{""main"":[[],[{""node"":""Code1"",""type"":""main"",""index"":0}]]},""Retrieve Profile"":{""main"":[[{""node"":""Send Invite"",""type"":""main"",""index"":0}],[{""node"":""Update record2"",""type"":""main"",""index"":0}]]},""If1"":{""main"":[[{""node"":""Update record"",""type"":""main"",""index"":0}],[{""node"":""Update record1"",""type"":""main"",""index"":0}]]},""Update record"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""Wait2"":{""main"":[[{""node"":""Loop Over Items1"",""type"":""main"",""index"":0}]]},""Update record1"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""Update record2"":{""main"":[[{""node"":""Wait2"",""type"":""main"",""index"":0}]]},""If"":{""main"":[[{""node"":""HTTP Request"",""type"":""main"",""index"":0}],[]]},""HTTP Request"":{""main"":[[{""node"":""If2"",""type"":""main"",""index"":0}]]},""If2"":{""main"":[[]]}},""createdAt"":""2025-11-03T05:08:26.288+00:00"",""updatedAt"":""2025-11-11T13:35:38.768+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[0]}},""pinData"":{},""versionId"":""511610f1-c2e9-48ad-8531-b20911301556"",""triggerCount"":1,""id"":""VKGPNIhto3zmXyCO"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":50}"
IPkwQbJiGTuDNMgx,"{""name"":""mail"",""active"":true,""nodes"":[{""parameters"":{""rule"":{""interval"":[{""field"":""hours"",""hoursInterval"":2}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[0,0],""id"":""b6149bf2-7298-48a3-98fe-6a9d0c3caea5"",""name"":""Schedule Trigger""},{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tbl9cTIy17L4yzPem"",""mode"":""list"",""cachedResultName"":""Google Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tbl9cTIy17L4yzPem""},""filterByFormula"":""{Email Sent}='ready'"",""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[208,0],""id"":""a3efcfe7-e346-47e8-b7b7-01730a7cf18a"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[416,0],""id"":""175b936a-a69d-40ce-a0d2-a61c4aa13533"",""name"":""Loop Over Items""},{""parameters"":{""fromEmail"":""info@kirabiz.in"",""toEmail"":""={{ $json.Email }}"",""subject"":""={{ $json['Mail Subject'] }}"",""html"":""={{ $json['Proposed Mail'] }}"",""options"":{}},""type"":""n8n-nodes-base.emailSend"",""typeVersion"":2.1,""position"":[624,96],""id"":""f4f860b9-ec38-408d-998c-3cb75eea3d8e"",""name"":""Send email"",""webhookId"":""5637953f-12c7-4398-ac64-d825345e4645"",""credentials"":{""smtp"":{""id"":""2aiRAznGco8RYbRe"",""name"":""SMTP account""}}},{""parameters"":{},""type"":""n8n-nodes-base.wait"",""typeVersion"":1.1,""position"":[832,96],""id"":""c3615ea7-1ec6-4ecc-9d39-6d26a1f8e0c9"",""name"":""Wait"",""webhookId"":""e376fea8-75e8-41eb-8c3b-55b7b68645fb""},{""parameters"":{""operation"":""update"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tbl9cTIy17L4yzPem"",""mode"":""list"",""cachedResultName"":""Google Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tbl9cTIy17L4yzPem""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""id"":""={{ $('Loop Over Items').item.json.id }}"",""Email Sent"":""sent""},""matchingColumns"":[""id""],""schema"":[{""id"":""id"",""displayName"":""id"",""required"":false,""defaultMatch"":true,""display"":true,""type"":""string"",""readOnly"":true,""removed"":false},{""id"":""Business Name"",""displayName"":""Business Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Website"",""displayName"":""Website"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Phone Number"",""displayName"":""Phone Number"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Location"",""displayName"":""Location"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Category"",""displayName"":""Category"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Notes"",""displayName"":""Notes"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email Sent"",""displayName"":""Email Sent"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""ready"",""value"":""ready""}],""readOnly"":false,""removed"":false},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed Mail"",""displayName"":""Proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Instagram Username"",""displayName"":""Instagram Username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[1040,96],""id"":""4dd1425e-2937-42f3-9df1-7135d9e29fa1"",""name"":""Update record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""fromEmail"":""info@kirabiz.in"",""toEmail"":""=pw2.ojee@gmail.com"",""subject"":""=Hi"",""emailFormat"":""text"",""text"":""Hello"",""options"":{""appendAttribution"":false}},""type"":""n8n-nodes-base.emailSend"",""typeVersion"":2.1,""position"":[176,240],""id"":""1630dcaf-7069-45af-aabd-b6a09f14c9aa"",""name"":""Send email1"",""webhookId"":""5637953f-12c7-4398-ac64-d825345e4645"",""credentials"":{""smtp"":{""id"":""2aiRAznGco8RYbRe"",""name"":""SMTP account""}}}],""connections"":{""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Search records"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[],[{""node"":""Send email"",""type"":""main"",""index"":0}]]},""Send email"":{""main"":[[{""node"":""Wait"",""type"":""main"",""index"":0}]]},""Wait"":{""main"":[[{""node"":""Update record"",""type"":""main"",""index"":0}]]},""Update record"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-11T13:42:45.881+00:00"",""updatedAt"":""2025-11-12T16:46:15.819+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[0]}},""pinData"":{},""versionId"":""fc43a0d2-2ab5-44ee-b0a0-5f77993bb9a2"",""triggerCount"":1,""id"":""IPkwQbJiGTuDNMgx"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""wmZO3kgno0Xit0s1"",""isArchived"":false,""versionCounter"":23}"
CneCC3GRHZkFu7sA,"{""name"":""Post"",""active"":false,""nodes"":[{""parameters"":{},""type"":""n8n-nodes-base.manualTrigger"",""typeVersion"":1,""position"":[0,0],""id"":""ffbfeb2f-374e-4cc4-9acf-95d4e524c576"",""name"":""When clicking ‚ÄòExecute workflow‚Äô""},{""parameters"":{""actorSource"":""store"",""actorId"":{""__rl"":true,""value"":""5QnEH5N71IK2mFLrP"",""mode"":""list"",""cachedResultName"":""Linkedin Posts Search Scraper | No Cookies (apimaestro/linkedin-posts-search-scraper-no-cookies)"",""cachedResultUrl"":""https://console.apify.com/actors/5QnEH5N71IK2mFLrP/input""},""customBody"":""{\n    \""keyword\"": \""Ai\"",\n    \""limit\"": 20,\n    \""page_number\"": 1,\n    \""sort_type\"": \""date_posted\""\n}""},""type"":""@apify/n8n-nodes-apify.apify"",""typeVersion"":1,""position"":[176,0],""id"":""e0f7a959-de10-43b4-bc54-cfb6d48909df"",""name"":""Run an Actor"",""credentials"":{""apifyApi"":{""id"":""8kAOvstVFuKbpJlO"",""name"":""Apify account""}}},{""parameters"":{""resource"":""Datasets"",""datasetId"":""={{ $json.defaultDatasetId }}"",""offset"":{}},""type"":""@apify/n8n-nodes-apify.apify"",""typeVersion"":1,""position"":[352,0],""id"":""e9ae3706-5875-42f6-a7b5-c5fd0e9e77d0"",""name"":""Get dataset items"",""credentials"":{""apifyApi"":{""id"":""8kAOvstVFuKbpJlO"",""name"":""Apify account""}}},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[32,448],""id"":""7c03b39f-064a-42f0-bbb9-49fb08883e9d"",""name"":""Loop Over Items""},{""parameters"":{""rules"":{""values"":[{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""leftValue"":""={{ $json.image_url ? true : false }}"",""rightValue"":"""",""operator"":{""type"":""boolean"",""operation"":""false"",""singleValue"":true},""id"":""6b297215-b026-4f32-97a8-663cfcf38051""}],""combinator"":""and""},""renameOutput"":true,""outputKey"":""No image""},{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""strict"",""version"":2},""conditions"":[{""id"":""b8573b90-d410-4ba8-be0b-18f38472c2d0"",""leftValue"":""={{ $json.image_url ? true : false }}"",""rightValue"":"""",""operator"":{""type"":""boolean"",""operation"":""true"",""singleValue"":true}}],""combinator"":""and""},""renameOutput"":true,""outputKey"":""Has an image""}]},""options"":{}},""type"":""n8n-nodes-base.switch"",""typeVersion"":3.2,""position"":[224,464],""id"":""feb3aa4a-c765-4311-87e7-9e2ae0627cc3"",""name"":""Switch""},{""parameters"":{""jsCode"":""// Input: items (from previous node)\n// Output: same count, each with selected fields (and image_url when applicable)\n\nreturn items.map(({ json }) => {\n  const out = {\n    post_url: json.post_url ?? null,\n    text: json.text ?? null,\n    name: json.author?.name ?? null,\n    profile_url: json.author?.profile_url ?? null,\n  };\n\n  const c = json.content;\n\n  if (c?.type === 'image') {\n    // Prefer the largest image from content.images; fall back to content.url\n    const imgs = Array.isArray(c.images)\n      ? c.images\n      : (c.images && typeof c.images === 'object')\n        ? Object.values(c.images)\n        : [];\n\n    let bestUrl = c.url;\n    if (imgs.length > 0) {\n      const best = imgs.reduce((best, img) => {\n        const areaBest = (best?.width || 0) * (best?.height || 0);\n        const areaImg  = (img?.width  || 0) * (img?.height  || 0);\n        return areaImg > areaBest ? img : best;\n      }, null);\n      if (best?.url) bestUrl = best.url;\n    }\n\n    if (bestUrl) out.image_url = bestUrl;\n  }\n\n  return { json: out };\n});\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[544,0],""id"":""0ee8c7c3-40ce-43e9-9e8b-69fbdbdf51bf"",""name"":""Bunch together""},{""parameters"":{""fieldsToAggregate"":{""fieldToAggregate"":[{""fieldToAggregate"":""profile_url""}]},""options"":{}},""type"":""n8n-nodes-base.aggregate"",""typeVersion"":1,""position"":[720,0],""id"":""392e9d06-9d65-49c6-b425-2f3048528028"",""name"":""Grab URLs""},{""parameters"":{""jsCode"":""/**\n * Merge the ORIGINAL post items from \""Bunch together\""\n * with the enrichment from \""Get dataset items1\"" by LinkedIn URL.\n * Outputs exactly the same number of items as \""Bunch together\"".\n *\n * If your enrichment node has a different name, change it below.\n */\n\n// ---- CONFIG: names of upstream nodes ----\nconst POSTS_NODE  = 'Bunch together';\nconst ENRICH_NODE = 'Get dataset items'; // <- exact name // <-- change if your node name differs\n\n// ---- helpers ----\nfunction normalizeLinkedinUrl(u) {\n  if (!u) return null;\n  try {\n    const url = new URL(String(u).trim());\n    url.hash = '';\n    url.search = '';                     // strip query params (e.g., miniProfileUrn)\n    let path = url.pathname.replace(/\\/+$/, '');\n    path = path.replace(/\\/posts$/i, ''); // drop trailing /posts\n    url.pathname = path;\n    return (url.origin + url.pathname).toLowerCase();\n  } catch {\n    return String(u).trim().split('?')[0].replace(/\\/+$/, '').toLowerCase();\n  }\n}\n\nfunction pick(obj, keys) {\n  const out = {};\n  for (const k of keys) out[k] = obj?.[k] ?? null;\n  return out;\n}\n\n// ---- load data DIRECTLY from the named nodes ----\nconst postItems = $items(POSTS_NODE).map(i => i.json);        // the 50 originals\nconst enrichItems = $items(ENRICH_NODE).map(i => i.json);     // ~42 (or whatever)\n\n\n// ---- build a lookup map for enrichment by normalized URL ----\nconst profileMap = new Map();\nfor (const p of enrichItems) {\n  const key =\n    normalizeLinkedinUrl(p.linkedinUrl) ||\n    normalizeLinkedinUrl(p.profile_url) ||\n    normalizeLinkedinUrl(p.linkedin) ||\n    normalizeLinkedinUrl(p.url);\n  if (!key) continue;\n  profileMap.set(key, p);\n}\n\n// Which enrichment fields to keep\nconst ENRICH_FIELDS = [\n  'linkedinUrl',\n  'firstName',\n  'lastName',\n  'fullName',\n  'headline',\n  'connections',\n  'followers',\n  'email',\n  'mobileNumber',\n  'jobTitle',\n  'companyName',\n  'companyIndustry',\n  'companyWebsite',\n  'companyLinkedin',\n  'companyFoundedIn',\n  'companySize',\n];\n\n// ---- merge: keep ALL original post fields, add ONLY selected enrichment ----\nconst merged = postItems.map(post => {\n  const key =\n    normalizeLinkedinUrl(post.profile_url) ||\n    normalizeLinkedinUrl(post.author?.profile_url) ||\n    normalizeLinkedinUrl(post.linkedinUrl);\n\n  const p = (key && profileMap.get(key)) || {};\n  const kept = pick(p, ENRICH_FIELDS);\n\n  // ensure linkedinUrl present even if only derivable from post\n  if (!kept.linkedinUrl) kept.linkedinUrl = key ?? null;\n\n  return { json: { ...post, ...kept } };\n});\n\n// Return EXACTLY the same number of items as the original posts\nreturn merged;\n\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[736,208],""id"":""38c4df47-5041-4337-897b-7e042eda9151"",""name"":""Code""},{""parameters"":{""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""messages"":{""values"":[{""content"":""={{ $json.profile_url }}\n\nFormat these URLs into this exact structure: \n\n{\n    \""profileUrls\"": [\n        \""https://www.linkedin.com/in/williamhgates\"",\n        \""http://www.linkedin.com/in/jeannie-wyrick-b4760710a\""\n    ]\n}\n\nI'll put only the formatted URLs and nothing else. ""}]},""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[160,208],""id"":""a815a054-ca07-44f8-ab12-2d200c724c78"",""name"":""Format URLs"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""messages"":{""values"":[{""content"":""=Name: {{ $json.name }}\nPost text: {{ $json.text }}\nJob title: {{ $json.jobTitle }}\nCompany name: {{ $json.companyName }}\nCompany size: {{ $json.companySize }}""}]},""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[448,448],""id"":""e79806c9-65a1-40d9-a0ea-d049a43d2b8e"",""name"":""Generate linkedin outreach"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""messages"":{""values"":[{""content"":""=Name: {{ $('Switch').item.json.name }}\nPost text: {{ $('Switch').item.json.text }}\nJob title: {{ $('Switch').item.json.jobTitle }}\nCompany name: {{ $('Switch').item.json.companyName }}\nCompany size: {{ $('Switch').item.json.companySize }}""}]},""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[800,448],""id"":""120f670e-79ea-45a5-bda1-eed507678e9f"",""name"":""Generate Email body1"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""messages"":{""values"":[{""content"":""=Name: {{ $('Switch').item.json.name }}\nPost text: {{ $('Switch').item.json.text }}\nImage description: {{ $json.content }}\nJob title: {{ $('Switch').item.json.jobTitle }}\nCompany name: {{ $('Switch').item.json.companyName }}\nCompany size: {{ $('Switch').item.json.companySize }}""},{""content"":""You are an expert B2B sales outreach assistant.  \nYou will receive two inputs:\n1. The person's name.  \n2. The text of their recent LinkedIn post.  \n3. A description of the image from that same LinkedIn post. \nYou may also receive some other enriched data on the lead. You can reference it if you need to, but you don't have to reference it though. \n\nYour task is to write a short, professional cold outreach message that feels personalized to them.\n\nContext about what we sell:  \nWe provide advanced marketing services designed to help businesses grow consistently. Our main services include:  \n- **Lead Generation**: building targeted outreach systems to consistently bring in qualified leads.  \n- **Paid Advertising**: creating and managing high-converting ad campaigns across LinkedIn, Google, and Meta.  \n- **Content Marketing**: producing and distributing high-quality content that attracts, nurtures, and converts prospects.  \n- **Marketing Automation**: setting up automated systems (email nurturing, AI-powered workflows, CRM integrations) that reduce manual work and scale growth.  \n\nWe position these services as tools to help businesses expand their reach, engage the right decision-makers, and convert more opportunities into revenue.\n\nGuidelines:\n- Start with their name in a natural greeting.  \n- Reference something relevant from their LinkedIn post (1‚Äì2 sentences max).  \n- Transition into showing how our services could provide value to them (choose the most relevant angle if possible).  \n- Keep the tone friendly, professional, and conversational ‚Äî not pushy.  \n- End with a light call-to-action about booking a quick demo or short call.  \n\nDo NOT invent details. If their post text is vague or unrelated, keep the personalization minimal but still reference that you saw their activity on LinkedIn.  \n\nReturn only the outreach message text.\n\nSign off with best regards, Rory.""}]},""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[672,640],""id"":""d321ad5a-c90f-433c-ba8e-bc37e2b94052"",""name"":""Generate linkedin outreach2"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""messages"":{""values"":[{""content"":""=Name: {{ $('Switch').item.json.name }}\nPost text: {{ $('Switch').item.json.text }}\nImage description: {{ $('Analyze image').item.json.content }}\nJob title: {{ $('Switch').item.json.jobTitle }}\nCompany name: {{ $('Switch').item.json.companyName }}\nCompany size: {{ $('Switch').item.json.companySize }}""},{""content"":""You are an expert B2B sales outreach assistant.  \nYou will receive two inputs:\n1. The person's name.  \n2. The text of their recent LinkedIn post.  \n3. A description of the image from that same LinkedIn post. \nYou may also receive some other enriched data on the lead. You can reference it if you need to, but you don't have to reference it though. \n\nYour task is to write a short, professional cold outreach email body that feels personalized to them.\n\nContext about what we sell:  \nWe provide advanced marketing services designed to help businesses grow consistently. Our main services include:  \n- **Lead Generation**: building targeted outreach systems to consistently bring in qualified leads.  \n- **Paid Advertising**: creating and managing high-converting ad campaigns across LinkedIn, Google, and Meta.  \n- **Content Marketing**: producing and distributing high-quality content that attracts, nurtures, and converts prospects.  \n- **Marketing Automation**: setting up automated systems (email nurturing, AI-powered workflows, CRM integrations) that reduce manual work and scale growth.  \n\nWe position these services as tools to help businesses expand their reach, engage the right decision-makers, and convert more opportunities into revenue.\n\nGuidelines:\n- Start with their name in a natural greeting.  \n- Reference something relevant from their LinkedIn post (1‚Äì2 sentences max).  \n- Transition into showing how our services could provide value to them (choose the most relevant angle if possible).  \n- Keep the tone friendly, professional, and conversational ‚Äî not pushy.  \n- End with a light call-to-action about booking a quick demo or short call.  \n\nDo NOT invent details. If their post text is vague or unrelated, keep the personalization minimal but still reference that you saw their activity on LinkedIn.  \n\nReturn only the email body text.\n""}]},""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[1008,640],""id"":""2899be91-4384-497e-b992-20984a413cda"",""name"":""Generate Email body2"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""resource"":""image"",""operation"":""analyze"",""modelId"":{""__rl"":true,""value"":""models/gemini-2.5-flash"",""mode"":""list"",""cachedResultName"":""models/gemini-2.5-flash""},""imageUrls"":""={{ $json.image_url }}"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.googleGemini"",""typeVersion"":1,""position"":[448,640],""id"":""1314d75f-4e70-4d85-9e0c-7440b300c089"",""name"":""Generate linkedin outreach3"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""operation"":""create"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblQbD0u8LZfU7eJa"",""mode"":""list"",""cachedResultName"":""Linked In Post"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblQbD0u8LZfU7eJa""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Name"":""{{ $('Switch').item.json.name }}"",""Job title"":""{{ $('Switch').item.json.jobTitle }}"",""Company"":""{{ $('Switch').item.json.companyName }}"",""LInkedin URL"":""{{ $('Switch').item.json.linkedinUrl }}"",""Company website"":""{{ $('Switch').item.json.companyWebsite }}"",""Email"":""{{ $('Switch').item.json.email }}"",""Linkedin message"":""{{ $('Generate linkedin outreach').item.json.message.content }}"",""Email message"":""{{ $json.message.content }}""},""matchingColumns"":[],""schema"":[{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Job title"",""displayName"":""Job title"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""LInkedin URL"",""displayName"":""LInkedin URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company website"",""displayName"":""Company website"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Linkedin message"",""displayName"":""Linkedin message"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email message"",""displayName"":""Email message"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[1168,448],""id"":""ab17a008-a864-4597-80aa-8f55817e584b"",""name"":""Create a record"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""create"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblQbD0u8LZfU7eJa"",""mode"":""list"",""cachedResultName"":""Linked In Post"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblQbD0u8LZfU7eJa""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Name"":""{{ $('Switch').item.json.name }}"",""Job title"":""{{ $('Switch').item.json.jobTitle }}"",""Company"":""{{ $('Switch').item.json.companyName }}"",""LInkedin URL"":""{{ $('Switch').item.json.linkedinUrl }}"",""Company website"":""{{ $('Switch').item.json.companyWebsite }}"",""Email"":""{{ $('Switch').item.json.email }}"",""Linkedin message"":""{{ $('Generate linkedin outreach1').item.json.message.content }}"",""Email message"":""{{ $json.message.content }}""},""matchingColumns"":[],""schema"":[{""id"":""Name"",""displayName"":""Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Job title"",""displayName"":""Job title"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company"",""displayName"":""Company"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""LInkedin URL"",""displayName"":""LInkedin URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Company website"",""displayName"":""Company website"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Linkedin message"",""displayName"":""Linkedin message"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email message"",""displayName"":""Email message"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[1392,640],""id"":""7b080451-1589-4520-9a04-0f63b8d40962"",""name"":""Create a record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""Run actor and get dataset"",""actorId"":{""__rl"":true,""value"":""TZpqU69nAcjZvnKLY"",""mode"":""list"",""cachedResultName"":""Bulk Linkedin Profile Scraper with Email üìß (No Cookies) (unlimitedleadtestinbox/bulk-linkedin-profile-scraper-with-email-no-cookies)"",""cachedResultUrl"":""https://console.apify.com/actors/TZpqU69nAcjZvnKLY/input""},""customBody"":""={{ JSON.stringify({\n  profileUrls: (\n    JSON.parse(\n      $json[\""content\""][\""parts\""][0][\""text\""].replace(/^```json\\s*|\\s*```$/g, \""\"")\n    ).profileUrls.map(url => ({ url }))\n  )\n}) }}\n""},""type"":""@apify/n8n-nodes-apify.apify"",""typeVersion"":1,""position"":[496,208],""id"":""f7b0b47d-5762-493b-b5b2-a017eb83350f"",""name"":""Run an Actor and get dataset"",""credentials"":{""apifyApi"":{""id"":""8kAOvstVFuKbpJlO"",""name"":""Apify account""}}}],""connections"":{""When clicking ‚ÄòExecute workflow‚Äô"":{""main"":[[{""node"":""Run an Actor"",""type"":""main"",""index"":0}]]},""Run an Actor"":{""main"":[[{""node"":""Get dataset items"",""type"":""main"",""index"":0}]]},""Get dataset items"":{""main"":[[{""node"":""Bunch together"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[],[{""node"":""Switch"",""type"":""main"",""index"":0}]]},""Switch"":{""main"":[[{""node"":""Generate linkedin outreach"",""type"":""main"",""index"":0}],[{""node"":""Generate linkedin outreach3"",""type"":""main"",""index"":0}]]},""Bunch together"":{""main"":[[{""node"":""Grab URLs"",""type"":""main"",""index"":0}]]},""Grab URLs"":{""main"":[[{""node"":""Format URLs"",""type"":""main"",""index"":0}]]},""Code"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Format URLs"":{""main"":[[{""node"":""Run an Actor and get dataset"",""type"":""main"",""index"":0}]]},""Generate linkedin outreach"":{""main"":[[{""node"":""Generate Email body1"",""type"":""main"",""index"":0}]]},""Generate linkedin outreach2"":{""main"":[[{""node"":""Generate Email body2"",""type"":""main"",""index"":0}]]},""Generate Email body2"":{""main"":[[{""node"":""Create a record1"",""type"":""main"",""index"":0}]]},""Generate linkedin outreach3"":{""main"":[[{""node"":""Generate linkedin outreach2"",""type"":""main"",""index"":0}]]},""Generate Email body1"":{""main"":[[{""node"":""Create a record"",""type"":""main"",""index"":0}]]},""Create a record1"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Create a record"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Run an Actor and get dataset"":{""main"":[[{""node"":""Code"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-11T16:25:12.799+00:00"",""updatedAt"":""2025-11-12T06:45:13.321+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":null,""pinData"":{""When clicking ‚ÄòExecute workflow‚Äô"":[{""json"":{}}]},""versionId"":""3a571999-5c03-4da9-b526-c70b1e5c4636"",""triggerCount"":0,""id"":""CneCC3GRHZkFu7sA"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""amaPkKmJ79Qh98Po"",""isArchived"":false,""versionCounter"":16}"
zajFerG0qbK9Y3y0,"{""name"":""google lead generation"",""active"":false,""nodes"":[{""parameters"":{""rule"":{""interval"":[{""field"":""hours""}]}},""type"":""n8n-nodes-base.scheduleTrigger"",""typeVersion"":1.2,""position"":[-2384,464],""id"":""8faa2e01-48e4-4475-8896-dc4fc487aa67"",""name"":""Schedule Trigger""},{""parameters"":{""operation"":""search"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tblL2gHjQ3e8GgRii"",""mode"":""list"",""cachedResultName"":""Google queries"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tblL2gHjQ3e8GgRii""},""filterByFormula"":""{Status}='Todo'"",""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[-2176,464],""id"":""919dc5af-c378-4169-9083-c82a69dc6121"",""name"":""Search records"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""operation"":""search"",""query"":""={{ $json.searchQuery }}"",""limit"":""={{ $json.count }}"",""requestOptions"":{}},""type"":""@mendable/n8n-nodes-firecrawl.firecrawl"",""typeVersion"":1,""position"":[-1072,464],""id"":""816c019b-7fa7-4035-8af7-7d1eb78912da"",""name"":""Search and optionally scrape search results1"",""credentials"":{""firecrawlApi"":{""id"":""gWVaKShY9c19RpXe"",""name"":""Firecrawl account""}}},{""parameters"":{""jsCode"":""// Extract input safely\nconst input = items[0]?.json || items[0];\nconst data = Array.isArray(input) ? input[0] : input;\n\n// Extract URLs (safe optional chaining)\nconst urls = data?.data?.web?.map(entry => entry.url) || [];\n\n// Return each URL as a separate item (loopable)\nreturn urls.map(url => ({ json: { url } }));\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-864,464],""id"":""107d1409-2c60-4f7e-a8e8-c556ebf5deb8"",""name"":""Code in JavaScript3""},{""parameters"":{""options"":{}},""type"":""n8n-nodes-base.splitInBatches"",""typeVersion"":3,""position"":[-656,464],""id"":""1ea89dc5-5c2c-413d-92f5-e62934039e6f"",""name"":""Loop Over Items""},{""parameters"":{""promptType"":""define"",""text"":""=Extract structured information from this query:\nQuery: {{ $json.leads }}\nReturn in JSON with keys: count, post, niche, location.\n\nOutput Format Explanation:\n\ncount ‚Üí Number of distinct personnel roles or job titles mentioned in the query.\n\npost ‚Üí List of personnel roles or job titles (e.g., Founder, CEO, Consultant).\n\nniche ‚Üí List of industries, business types, or niches mentioned (e.g., SaaS, agency, clinic).\n\nlocation ‚Üí List of countries, regions, or cities mentioned. Extract from both \""country:\"" syntax and direct country names.\n\nExample Input:\n(\""Founder\"" OR \""Co-Founder\"" OR \""CEO\"" OR \""Consultant\"" OR \""Head of Marketing\"") AND (\""B2B services\"" OR \""agencies\"" OR \""SaaS\"" OR \""coaches\"" OR \""clinics\"" OR \""D2C\"") AND (Owner OR C-Level OR Head) AND (site:linkedin.com/in OR site:instagram.com OR site:youtube.com OR site:x.com) AND (country:India)\n\nExample Output:\n{\n  \""count\"": 5,\n  \""post\"": [\""Founder\"", \""Co-Founder\"", \""CEO\"", \""Consultant\"", \""Head of Marketing\""],\n  \""niche\"": [\""B2B services\"", \""agencies\"", \""SaaS\"", \""coaches\"", \""clinics\"", \""D2C\""],\n  \""location\"": [\""India\""]\n}"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.agent"",""typeVersion"":2.2,""position"":[-1728,464],""id"":""98f3a5bd-94e0-4c20-b48d-25175fbb9bd2"",""name"":""AI Agent""},{""parameters"":{""modelName"":""models/gemini-2.0-flash-001"",""options"":{}},""type"":""@n8n/n8n-nodes-langchain.lmChatGoogleGemini"",""typeVersion"":1,""position"":[-1728,656],""id"":""4a47c513-cc49-4844-a08a-2369c0ff525d"",""name"":""Google Gemini Chat Model"",""credentials"":{""googlePalmApi"":{""id"":""cmPhc69UUFV9cgpC"",""name"":""Google Gemini(PaLM) Api account""}}},{""parameters"":{""jsCode"":""// Extract Gemini or AI agent output safely\nlet raw;\n\n// Handle if input is array or object\nif (Array.isArray($json)) {\n  raw = $json[0]?.output || $json[0];\n} else {\n  raw = $json.output || $json;\n}\n\n// Clean up formatting (remove ```json, ``` and whitespace)\nif (typeof raw === \""string\"") {\n  raw = raw.replace(/```json|```/gi, \""\"").trim();\n}\n\n// Parse JSON safely\nlet data;\ntry {\n  data = JSON.parse(raw);\n} catch (e) {\n  throw new Error(\""Failed to parse AI output: \"" + e.message + \""\\nRaw: \"" + raw);\n}\n\n// Build search query targeting actual company sites\nlet searchQuery = \""\"";\nif (data.niche && data.niche.length > 0) {\n  const niches = data.niche.map(n => `\""${n}\""`).join(\"" OR \"");\n  searchQuery += `(${niches})`;\n}\n\nif (data.location && data.location.length > 0) {\n  const locations = data.location.map(l => `\""${l}\""`).join(\"" OR \"");\n  searchQuery += ` (${locations})`;\n}\n\n// Add terms that indicate company pages\nsearchQuery += ' (\""about us\"" OR \""contact\"" OR \""services\"")';\n\n// EXCLUDE LinkedIn (search regular websites instead)\nsearchQuery += ' -site:linkedin.com';\n\nreturn {\n  json: {\n    count: data.count || 0,\n    post: data.post || [],\n    niche: data.niche || [],\n    location: data.location || [],\n    generated: 0,\n    searchQuery: searchQuery.trim()\n  }\n};""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-1312,464],""id"":""708d632c-a8bc-4b25-809c-78df2a7f822d"",""name"":""Parse Query""},{""parameters"":{""method"":""POST"",""url"":""https://api.fetchfox.ai/api/extract"",""sendHeaders"":true,""headerParameters"":{""parameters"":[{""name"":""Authorization"",""value"":""Bearer ff_gctezi5xfduz8q8bwch89yd9oqw9m8myxmj9dk24""}]},""sendBody"":true,""specifyBody"":""json"",""jsonBody"":""={\n  \""urls\"": [ {{ $json.url ? `\""${$json.url}\""` : \""\"" }} ],\n  \""template\"": {\n    \""Business Name\"": \""Official business name or brand name of the company\"",\n    \""Website\"": \""Official company website URL (extract from LinkedIn page or find the main domain)\"",\n    \""Phone Number\"": \""Primary phone number or WhatsApp contact if listed\"",\n    \""Email\"": \""Official contact email address (look for general inquiries, info@, contact@, etc.)\"",\n    \""Location\"": \""Company headquarters location, city, region, or country mentioned on the LinkedIn page\"",\n    \""Category\"": \""Type of business or industry this company operates in (e.g., SaaS, Agency, Consulting, D2C, B2B Services, Healthcare, etc.)\"",\n    \""Post / Titles\"": \""Key personnel roles mentioned on the company page (e.g., Founder, CEO, number of employees in leadership)\"",\n    \""Niche\"": \""Specific business niche or market segment (e.g., B2B SaaS, Marketing Agency, Health Coaching, etc.)\"",\n    \""Notes\"": \""Company description, services offered, target market, or any relevant business details from the LinkedIn page\"",\n    \""Email Sent\"": \""Leave blank\"",\n    \""Instagram Username\"": \""Instagram handle if linked on the LinkedIn company page\"",\n    \""LinkedIn Company URL\"": \""The full LinkedIn company page URL being scraped\""\n  }\n}"",""options"":{}},""type"":""n8n-nodes-base.httpRequest"",""typeVersion"":4.3,""position"":[-448,560],""id"":""49169d87-6b96-4065-9ee6-9ce8a02376ce"",""name"":""HTTP Request1""},{""parameters"":{""operation"":""create"",""base"":{""__rl"":true,""value"":""app9PrOwoDXTgScb2"",""mode"":""list"",""cachedResultName"":""Srijan"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2""},""table"":{""__rl"":true,""value"":""tbl9cTIy17L4yzPem"",""mode"":""list"",""cachedResultName"":""Google Leads"",""cachedResultUrl"":""https://airtable.com/app9PrOwoDXTgScb2/tbl9cTIy17L4yzPem""},""columns"":{""mappingMode"":""defineBelow"",""value"":{""Mail Subject"":""={{ $json.email_subject }}"",""Proposed Mail"":""={{ $json.email_body }}"",""Business Name"":""={{ $('If1').item.json[\""Business Name\""] }}"",""Website"":""={{ $('If1').item.json.Website }}"",""Phone Number"":""={{ $('If1').item.json[\""Phone Number\""] }}"",""Email"":""={{ $('If1').item.json.Email }}"",""Location"":""={{ $('If1').item.json.Location }}"",""Category"":""={{ $('If1').item.json.Category }}"",""Notes"":""={{ $('If1').item.json.Notes }}"",""Email Sent"":""ready"",""Instagram Username"":""={{ $('If1').item.json[\""Instagram Username\""] }}"",""Linkedin URL"":""={{ $('If1').item.json['LinkedIn Company URL'] }}""},""matchingColumns"":[],""schema"":[{""id"":""Business Name"",""displayName"":""Business Name"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Website"",""displayName"":""Website"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Phone Number"",""displayName"":""Phone Number"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email"",""displayName"":""Email"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Linkedin URL"",""displayName"":""Linkedin URL"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Location"",""displayName"":""Location"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Category"",""displayName"":""Category"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Notes"",""displayName"":""Notes"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Email Sent"",""displayName"":""Email Sent"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""options"",""options"":[{""name"":""sent"",""value"":""sent""},{""name"":""ready"",""value"":""ready""}],""readOnly"":false,""removed"":false},{""id"":""Mail Subject"",""displayName"":""Mail Subject"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Proposed Mail"",""displayName"":""Proposed Mail"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false},{""id"":""Instagram Username"",""displayName"":""Instagram Username"",""required"":false,""defaultMatch"":false,""canBeUsedToMatch"":true,""display"":true,""type"":""string"",""readOnly"":false,""removed"":false}],""attemptToConvertTypes"":false,""convertFieldsToString"":false},""options"":{}},""type"":""n8n-nodes-base.airtable"",""typeVersion"":2.1,""position"":[240,544],""id"":""61c4a3d9-1dd5-47d3-8d70-50ae0a63e874"",""name"":""Create a record1"",""credentials"":{""airtableTokenApi"":{""id"":""0NmXfLyMd2ennXq6"",""name"":""Airtable Personal Access Token account""}}},{""parameters"":{""conditions"":{""options"":{""caseSensitive"":true,""leftValue"":"""",""typeValidation"":""loose"",""version"":2},""conditions"":[{""id"":""63cf1b1f-7ff5-41aa-af64-d2ffcf1207a3"",""leftValue"":""={{ $json.isComplete }}"",""rightValue"":"""",""operator"":{""type"":""boolean"",""operation"":""true"",""singleValue"":true}}],""combinator"":""and""},""looseTypeValidation"":true,""options"":{}},""type"":""n8n-nodes-base.if"",""typeVersion"":2.2,""position"":[-64,560],""id"":""b992ce78-f4d0-4701-a3de-878df6afcbc5"",""name"":""If1""},{""parameters"":{""jsCode"":""// Get the first item from FetchFox results\nconst record = $json.results?.items?.[0] || {};\n\n// Define mandatory fields\nconst required = [\n  \""Business Name\"",\n  \""Website\"",\n  \""Phone Number\"",\n  \""Email\"",\n  \""Location\"",\n  \""Category\"",\n  \""Notes\""\n];\n\n// Helper to check if a value is valid\nfunction isValid(value) {\n  if (!value) return false;\n  const str = value.toString().trim().toLowerCase();\n  if ([\""\"", \""n/a\"", \""none\"", \""-\"", \""null\"", \""undefined\""].includes(str)) return false;\n  return true;\n}\n\n// Evaluate completeness\nconst isComplete = required.every(key => isValid(record[key]));\n\n// Flatten + output\nreturn [{\n  json: {\n    ...record,\n    isComplete\n  }\n}];\n""},""type"":""n8n-nodes-base.code"",""typeVersion"":2,""position"":[-256,560],""id"":""b80c3edd-1179-4a2b-95da-d8b84551f969"",""name"":""Code in JavaScript4""},{""parameters"":{},""type"":""n8n-nodes-base.limit"",""typeVersion"":1,""position"":[-1968,464],""id"":""1aadec7c-6470-4b63-a1a2-3da7aaa463e8"",""name"":""Limit""}],""connections"":{""Schedule Trigger"":{""main"":[[{""node"":""Search records"",""type"":""main"",""index"":0}]]},""Search records"":{""main"":[[{""node"":""Limit"",""type"":""main"",""index"":0}]]},""Search and optionally scrape search results1"":{""main"":[[{""node"":""Code in JavaScript3"",""type"":""main"",""index"":0}]]},""Code in JavaScript3"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Loop Over Items"":{""main"":[[],[{""node"":""HTTP Request1"",""type"":""main"",""index"":0}]]},""AI Agent"":{""main"":[[{""node"":""Parse Query"",""type"":""main"",""index"":0}]]},""Google Gemini Chat Model"":{""ai_languageModel"":[[{""node"":""AI Agent"",""type"":""ai_languageModel"",""index"":0}]]},""Parse Query"":{""main"":[[{""node"":""Search and optionally scrape search results1"",""type"":""main"",""index"":0}]]},""HTTP Request1"":{""main"":[[{""node"":""Code in JavaScript4"",""type"":""main"",""index"":0}]]},""Create a record1"":{""main"":[[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""If1"":{""main"":[[{""node"":""Create a record1"",""type"":""main"",""index"":0}],[{""node"":""Loop Over Items"",""type"":""main"",""index"":0}]]},""Code in JavaScript4"":{""main"":[[{""node"":""If1"",""type"":""main"",""index"":0}]]},""Limit"":{""main"":[[{""node"":""AI Agent"",""type"":""main"",""index"":0}]]}},""createdAt"":""2025-11-09T16:59:36.698+00:00"",""updatedAt"":""2025-11-12T09:36:35.972+00:00"",""settings"":{""executionOrder"":""v1""},""staticData"":{""node:Schedule Trigger"":{""recurrenceRules"":[]}},""pinData"":{},""versionId"":""58443558-a097-4e9d-b287-dc48628ebd86"",""triggerCount"":1,""id"":""zajFerG0qbK9Y3y0"",""meta"":{""templateCredsSetupCompleted"":true},""parentFolderId"":""wmZO3kgno0Xit0s1"",""isArchived"":false,""versionCounter"":26}"
